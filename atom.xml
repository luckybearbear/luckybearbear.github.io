<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>luckybearbear`s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://luckybearbear.github.io/"/>
  <updated>2020-07-24T03:47:23.505Z</updated>
  <id>https://luckybearbear.github.io/</id>
  
  <author>
    <name>luckybearbear</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>YApi可视化接口管理平台centos7部署</title>
    <link href="https://luckybearbear.github.io/2020/07/24/YApi%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0centos7%E9%83%A8%E7%BD%B2/"/>
    <id>https://luckybearbear.github.io/2020/07/24/YApi可视化接口管理平台centos7部署/</id>
    <published>2020-07-24T03:45:18.000Z</published>
    <updated>2020-07-24T03:47:23.505Z</updated>
    
    <content type="html"><![CDATA[<h2 id="YApi-可视化接口管理平台centos7部署"><a href="#YApi-可视化接口管理平台centos7部署" class="headerlink" title="YApi 可视化接口管理平台centos7部署"></a>YApi 可视化接口管理平台centos7部署</h2><h1 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://npm.taobao.org/mirrors/node/v12.4.0/node-v12.4.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure><h2 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf node-v12.4.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure><h2 id="进入bin目录，执行ls命令"><a href="#进入bin目录，执行ls命令" class="headerlink" title="进入bin目录，执行ls命令"></a>进入bin目录，执行ls命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd node-v12.4.0-linux-x64/bin &amp;&amp; ls</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./node -v</span><br></pre></td></tr></table></figure><p>安装成功，这是node 和 npm还不能全局使用，需要做关联。</p><h2 id="关联"><a href="#关联" class="headerlink" title="关联"></a>关联</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /node-v12.4.0-linux-x64/bin/node /usr/local/bin/node</span><br><span class="line">ln -s /node-v12.4.0-linux-x64/bin/npm /usr/local/bin/npm</span><br></pre></td></tr></table></figure><p> 这样就可以在任何目录下执行 <code>node</code> 和 <code>npm</code> 命令。</p><h1 id="安装MongoDB"><a href="#安装MongoDB" class="headerlink" title="安装MongoDB"></a>安装MongoDB</h1><h2 id="下载-1"><a href="#下载-1" class="headerlink" title="下载"></a>下载</h2><p><code>wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-4.2.8.tgz</code></p><h2 id="解压与转移"><a href="#解压与转移" class="headerlink" title="解压与转移"></a>解压与转移</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf mongodb-linux-x86_64-rhel70-4.2.8.tgz</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv mongodb-linux-x86_64-rhel70-4.2.8 /usr/local/mongodb</span><br></pre></td></tr></table></figure><h2 id="配置conf与目录"><a href="#配置conf与目录" class="headerlink" title="配置conf与目录"></a>配置conf与目录</h2><h3 id="进入mongodb目录"><a href="#进入mongodb目录" class="headerlink" title="进入mongodb目录"></a>进入mongodb目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mongodb/</span><br></pre></td></tr></table></figure><h3 id="创建db目录和日志文件"><a href="#创建db目录和日志文件" class="headerlink" title="创建db目录和日志文件"></a>创建db目录和日志文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ./data/db</span><br><span class="line"></span><br><span class="line">mkdir -p ./logs</span><br><span class="line"></span><br><span class="line">touch ./logs/mongodb.log</span><br></pre></td></tr></table></figure><h3 id="创建mongodb-conf文件"><a href="#创建mongodb-conf文件" class="headerlink" title="创建mongodb.conf文件"></a>创建mongodb.conf文件</h3><p>vim mongodb.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#端口号</span><br><span class="line">port=27017</span><br><span class="line">#db目录</span><br><span class="line">dbpath=/usr/local/mongodb/data/db</span><br><span class="line">#日志目录</span><br><span class="line">logpath=//usr/local/mongodb/logs/mongodb.log</span><br><span class="line">#后台</span><br><span class="line">fork=true</span><br><span class="line">#日志输出</span><br><span class="line">logappend=true</span><br><span class="line">#允许远程IP连接</span><br><span class="line">bind_ip=0.0.0.0</span><br></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/mongod --config mongodb.conf</span><br></pre></td></tr></table></figure><h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/mongo</span><br></pre></td></tr></table></figure><h1 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install git</span><br></pre></td></tr></table></figure><h1 id="安装YApi"><a href="#安装YApi" class="headerlink" title="安装YApi"></a>安装YApi</h1><p>参考官网</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;YApi-可视化接口管理平台centos7部署&quot;&gt;&lt;a href=&quot;#YApi-可视化接口管理平台centos7部署&quot; class=&quot;headerlink&quot; title=&quot;YApi 可视化接口管理平台centos7部署&quot;&gt;&lt;/a&gt;YApi 可视化接口管理平台centos7部署&lt;/h2&gt;&lt;h1 id=&quot;安装nodejs&quot;&gt;&lt;a href=&quot;#安装nodejs&quot; class=&quot;headerlink&quot; title=&quot;安装nodejs&quot;&gt;&lt;/a&gt;安装nodejs&lt;/h1&gt;&lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget https://npm.taobao.org/mirrors/node/v12.4.0/node-v12.4.0-linux-x64.tar.xz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;解压&quot;&gt;&lt;a href=&quot;#解压&quot; class=&quot;headerlink&quot; title=&quot;解压&quot;&gt;&lt;/a&gt;解压&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tar -xvf node-v12.4.0-linux-x64.tar.xz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;进入bin目录，执行ls命令&quot;&gt;&lt;a href=&quot;#进入bin目录，执行ls命令&quot; class=&quot;headerlink&quot; title=&quot;进入bin目录，执行ls命令&quot;&gt;&lt;/a&gt;进入bin目录，执行ls命令&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd node-v12.4.0-linux-x64/bin &amp;amp;&amp;amp; ls&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="工具" scheme="https://luckybearbear.github.io/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>springboot+shiro整合</title>
    <link href="https://luckybearbear.github.io/2019/12/18/springbootAndShiro/"/>
    <id>https://luckybearbear.github.io/2019/12/18/springbootAndShiro/</id>
    <published>2019-12-18T05:16:48.000Z</published>
    <updated>2020-07-24T03:34:57.631Z</updated>
    
    <content type="html"><![CDATA[<h1 id="依赖包"><a href="#依赖包" class="headerlink" title="依赖包"></a>依赖包</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.shiro&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;shiro-spring&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.4.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure> <a id="more"></a><h1 id="数据库表"><a href="#数据库表" class="headerlink" title="数据库表"></a>数据库表</h1><h2 id="用户表-system-user"><a href="#用户表-system-user" class="headerlink" title="用户表 system_user"></a>用户表 system_user</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `system_user` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &apos;主键id&apos;,</span><br><span class="line">  `user_name` varchar(100) DEFAULT NULL COMMENT &apos;登录账号&apos;,</span><br><span class="line">  `real_name` varchar(100) DEFAULT NULL COMMENT &apos;真实姓名&apos;,</span><br><span class="line">  `password` varchar(255) DEFAULT NULL COMMENT &apos;密码&apos;,</span><br><span class="line">  `salt` varchar(45) DEFAULT NULL COMMENT &apos;md5密码盐&apos;,</span><br><span class="line">  `avatar` varchar(255) DEFAULT NULL COMMENT &apos;头像&apos;,</span><br><span class="line">  `birthday` datetime DEFAULT NULL COMMENT &apos;生日&apos;,</span><br><span class="line">  `sex` int(11) DEFAULT NULL COMMENT &apos;性别（1：男 2：女）&apos;,</span><br><span class="line">  `email` varchar(45) DEFAULT NULL COMMENT &apos;电子邮件&apos;,</span><br><span class="line">  `phone` varchar(45) DEFAULT NULL COMMENT &apos;电话&apos;,</span><br><span class="line">  `status` int(2) DEFAULT NULL COMMENT &apos;状态(1：正常  2：冻结 ）&apos;,</span><br><span class="line">  `del_flag` varchar(1) DEFAULT NULL COMMENT &apos;删除状态（0，正常，1已删除）&apos;,</span><br><span class="line">  `activiti_sync` varchar(6) DEFAULT NULL COMMENT &apos;同步工作流引擎1同步0不同步&apos;,</span><br><span class="line">  `create_by` varchar(32) DEFAULT NULL COMMENT &apos;创建人&apos;,</span><br><span class="line">  `create_time` datetime DEFAULT NULL COMMENT &apos;创建时间&apos;,</span><br><span class="line">  `update_by` varchar(32) DEFAULT NULL COMMENT &apos;更新人&apos;,</span><br><span class="line">  `update_time` datetime DEFAULT NULL COMMENT &apos;更新时间&apos;,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;</span><br></pre></td></tr></table></figure><h2 id="角色表-system-role"><a href="#角色表-system-role" class="headerlink" title="角色表 system_role"></a>角色表 system_role</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `system_role` (</span><br><span class="line">  `id` varchar(32) NOT NULL COMMENT &apos;主键id&apos;,</span><br><span class="line">  `role_name` varchar(200) DEFAULT NULL COMMENT &apos;角色名称&apos;,</span><br><span class="line">  `role_code` varchar(100) NOT NULL COMMENT &apos;角色编码&apos;,</span><br><span class="line">  `description` varchar(255) DEFAULT NULL COMMENT &apos;描述&apos;,</span><br><span class="line">  `create_by` varchar(32) DEFAULT NULL COMMENT &apos;创建人&apos;,</span><br><span class="line">  `create_time` datetime DEFAULT NULL COMMENT &apos;创建时间&apos;,</span><br><span class="line">  `update_by` varchar(32) DEFAULT NULL COMMENT &apos;更新人&apos;,</span><br><span class="line">  `update_time` datetime DEFAULT NULL COMMENT &apos;更新时间&apos;,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  UNIQUE KEY `index_role_code` (`role_code`) USING BTREE</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;</span><br></pre></td></tr></table></figure><h2 id="用户角色表-system-user-role"><a href="#用户角色表-system-user-role" class="headerlink" title="用户角色表 system_user_role"></a>用户角色表 system_user_role</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `system_user_role` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &apos;主键id&apos;,</span><br><span class="line">  `user_id` varchar(32) DEFAULT NULL COMMENT &apos;用户id&apos;,</span><br><span class="line">  `role_id` varchar(32) DEFAULT NULL COMMENT &apos;角色id&apos;,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  KEY `index2_groupuu_user_id` (`user_id`) USING BTREE,</span><br><span class="line">  KEY `index2_groupuu_ole_id` (`role_id`) USING BTREE,</span><br><span class="line">  KEY `index2_groupuu_useridandroleid` (`user_id`,`role_id`) USING BTREE</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;</span><br></pre></td></tr></table></figure><h1 id="shiro相关"><a href="#shiro相关" class="headerlink" title="shiro相关"></a>shiro相关</h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;依赖包&quot;&gt;&lt;a href=&quot;#依赖包&quot; class=&quot;headerlink&quot; title=&quot;依赖包&quot;&gt;&lt;/a&gt;依赖包&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;groupId&amp;gt;org.apache.shiro&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;artifactId&amp;gt;shiro-spring&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;version&amp;gt;1.4.0&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="springboot" scheme="https://luckybearbear.github.io/tags/springboot/"/>
    
      <category term="shiro" scheme="https://luckybearbear.github.io/tags/shiro/"/>
    
  </entry>
  
  <entry>
    <title>docker安装并使用Nexus3</title>
    <link href="https://luckybearbear.github.io/2019/12/03/docker%E5%AE%89%E8%A3%85%E5%B9%B6%E4%BD%BF%E7%94%A8Nexus3/"/>
    <id>https://luckybearbear.github.io/2019/12/03/docker安装并使用Nexus3/</id>
    <published>2019-12-03T07:23:39.000Z</published>
    <updated>2020-07-24T03:34:57.629Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="拉取nexus3镜像"><a href="#拉取nexus3镜像" class="headerlink" title="拉取nexus3镜像"></a>拉取nexus3镜像</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull docker.io/sonatype/nexus3</span><br></pre></td></tr></table></figure> <a id="more"></a><h2 id="运行nexus容器"><a href="#运行nexus容器" class="headerlink" title="运行nexus容器"></a>运行nexus容器</h2><p><code>docker run -d -p 8081:8081 --restart=always --name nexus -v nexus-data:/home/nexus sonatype/docker-nexus3</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">注释：</span><br><span class="line">docker run   -d            ##后台启动 </span><br><span class="line">-p 8081:8081               ##映射端口：容器端口</span><br><span class="line">--restart=always           ##容器重启策略</span><br><span class="line">--name nexus               ##容器命名</span><br><span class="line">-v nexus-data:/home/nexus  ##数据挂载到 /home/nexus 例如nexus下载包放入宿主机该位置</span><br><span class="line">sonatype/docker-nexus3     ##指定nexus3镜像</span><br></pre></td></tr></table></figure><h2 id="浏览器访问"><a href="#浏览器访问" class="headerlink" title="浏览器访问"></a>浏览器访问</h2><p><code>http://ip:8081</code><br>登录账号：admin<br>登录密码：admin123</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;h2 id=&quot;拉取nexus3镜像&quot;&gt;&lt;a href=&quot;#拉取nexus3镜像&quot; class=&quot;headerlink&quot; title=&quot;拉取nexus3镜像&quot;&gt;&lt;/a&gt;拉取nexus3镜像&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker pull docker.io/sonatype/nexus3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Nexus" scheme="https://luckybearbear.github.io/tags/Nexus/"/>
    
  </entry>
  
  <entry>
    <title>java整型相除为0</title>
    <link href="https://luckybearbear.github.io/2019/11/13/java%E6%95%B4%E5%9E%8B%E7%9B%B8%E9%99%A4%E4%B8%BA0/"/>
    <id>https://luckybearbear.github.io/2019/11/13/java整型相除为0/</id>
    <published>2019-11-13T03:50:12.000Z</published>
    <updated>2020-07-24T03:34:57.630Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20191113115636.png" alt></p><h1 id="正确写法"><a href="#正确写法" class="headerlink" title="正确写法"></a>正确写法</h1><p><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20191113115813.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20191113115636.png&quot; alt&gt;&lt;/p&gt;
&lt;h1 id=&quot;正确写法&quot;&gt;&lt;a href=&quot;#正确写法&quot; clas
      
    
    </summary>
    
    
      <category term="JAVA" scheme="https://luckybearbear.github.io/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>docker安装zookeeper</title>
    <link href="https://luckybearbear.github.io/2019/10/16/docker%E5%AE%89%E8%A3%85zookeeper/"/>
    <id>https://luckybearbear.github.io/2019/10/16/docker安装zookeeper/</id>
    <published>2019-10-16T06:33:42.000Z</published>
    <updated>2020-07-24T03:34:57.628Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载zookeeper镜像"><a href="#下载zookeeper镜像" class="headerlink" title="下载zookeeper镜像"></a>下载zookeeper镜像</h1><p><code>docker pull zookeeper</code></p><h1 id="启动容器并添加映射"><a href="#启动容器并添加映射" class="headerlink" title="启动容器并添加映射"></a>启动容器并添加映射</h1><p><code>docker run --privileged=true -d --name zookeeper --publish 2181:2181  -d zookeeper:latest</code></p><h1 id="查看容器是否启动"><a href="#查看容器是否启动" class="headerlink" title="查看容器是否启动"></a>查看容器是否启动</h1><p><code>docker ps</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;下载zookeeper镜像&quot;&gt;&lt;a href=&quot;#下载zookeeper镜像&quot; class=&quot;headerlink&quot; title=&quot;下载zookeeper镜像&quot;&gt;&lt;/a&gt;下载zookeeper镜像&lt;/h1&gt;&lt;p&gt;&lt;code&gt;docker pull zookeepe
      
    
    </summary>
    
    
      <category term="docker" scheme="https://luckybearbear.github.io/tags/docker/"/>
    
      <category term="zookeeper" scheme="https://luckybearbear.github.io/tags/zookeeper/"/>
    
  </entry>
  
  <entry>
    <title>Centos关闭防火墙</title>
    <link href="https://luckybearbear.github.io/2019/10/16/Centos%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99/"/>
    <id>https://luckybearbear.github.io/2019/10/16/Centos关闭防火墙/</id>
    <published>2019-10-16T06:02:59.000Z</published>
    <updated>2020-07-24T03:34:57.626Z</updated>
    
    <content type="html"><![CDATA[<h1 id="查看防火墙是否开启"><a href="#查看防火墙是否开启" class="headerlink" title="查看防火墙是否开启"></a>查看防火墙是否开启</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state</span><br></pre></td></tr></table></figure><h1 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h1><p><code>systemctl stop firewalld.service</code></p><h1 id="禁止firewall开机启动"><a href="#禁止firewall开机启动" class="headerlink" title="禁止firewall开机启动"></a>禁止firewall开机启动</h1><p><code>systemctl disable firewalld.service</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;查看防火墙是否开启&quot;&gt;&lt;a href=&quot;#查看防火墙是否开启&quot; class=&quot;headerlink&quot; title=&quot;查看防火墙是否开启&quot;&gt;&lt;/a&gt;查看防火墙是否开启&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t
      
    
    </summary>
    
    
      <category term="Centos" scheme="https://luckybearbear.github.io/tags/Centos/"/>
    
  </entry>
  
  <entry>
    <title>Docker容器开机自动启动</title>
    <link href="https://luckybearbear.github.io/2019/10/16/Docker%E5%AE%B9%E5%99%A8%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8/"/>
    <id>https://luckybearbear.github.io/2019/10/16/Docker容器开机自动启动/</id>
    <published>2019-10-16T05:09:20.000Z</published>
    <updated>2020-07-24T03:34:57.627Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p> 部署项目服务器时，为了应对停电等情况影响正常web项目的访问，会把Docker容器设置为开机自动启动。<br> <a id="more"></a></p><h1 id="初次运行容器"><a href="#初次运行容器" class="headerlink" title="初次运行容器"></a>初次运行容器</h1><p> 使用–restart参数来设置<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -m 512m --memory-swap 1G -it -p 58080:8080 --restart=always   </span><br><span class="line">--name bvrfis --volumes-from logdata mytomcat:4.0 /root/run.sh</span><br></pre></td></tr></table></figure></p><p> restart具体参数值详细信息：<br>        no -  容器退出时，不重启容器；<br>        on-failure - 只有在非0状态退出时才从新启动容器；<br>        always - 无论退出状态是如何，都重启容器；</p><h1 id="创建时未指定-–restart-always"><a href="#创建时未指定-–restart-always" class="headerlink" title="创建时未指定 –restart=always"></a>创建时未指定 –restart=always</h1><p>可通过update 命令设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker update --restart=always xxx</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt; 部署项目服务器时，为了应对停电等情况影响正常web项目的访问，会把Docker容器设置为开机自动启动。&lt;br&gt;
    
    </summary>
    
    
      <category term="docker" scheme="https://luckybearbear.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Centos7安装docker</title>
    <link href="https://luckybearbear.github.io/2019/10/16/Centos7%E5%AE%89%E8%A3%85docker/"/>
    <id>https://luckybearbear.github.io/2019/10/16/Centos7安装docker/</id>
    <published>2019-10-16T04:52:20.000Z</published>
    <updated>2020-07-24T03:34:57.626Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h2 id="Docker需求配置"><a href="#Docker需求配置" class="headerlink" title="Docker需求配置"></a>Docker需求配置</h2><p>lunix内核，要求3.8以上<br>centos7<br>Docker是一个进程，一启动就两个进程，一个服务，一个守护进程。占用资源就非常少，启动速度非常快，1s。<br>一台机器上vm，3到10个实例。docker 100到10000。</p><a id="more"></a><h1 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h1><h2 id="安装工具包"><a href="#安装工具包" class="headerlink" title="安装工具包"></a>安装工具包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils #安装工具包，缺少这些依赖将无法完成</span><br></pre></td></tr></table></figure><p>执行结果如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Loaded plugins: fastestmirror, langpacks</span><br><span class="line">base                                                                                          | 3.6 kB  00:00:00</span><br><span class="line">epel                                                                                          | 4.3 kB  00:00:00</span><br><span class="line">extras                                                                                        | 3.4 kB  00:00:00</span><br><span class="line">update                                                                                        | 3.4 kB  00:00:00</span><br><span class="line">(1/3): epel/7/x86_64/updateinfo                                                               | 797 kB  00:00:00</span><br><span class="line">(2/3): epel/7/x86_64/primary_db                                                               | 4.7 MB  00:00:00</span><br><span class="line">(3/3): update/7/x86_64/primary_db                                                             | 4.8 MB  00:00:00</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">Package yum-utils-1.1.31-40.el7.noarch already installed and latest version</span><br><span class="line">Nothing to do</span><br></pre></td></tr></table></figure><h2 id="设置远程仓库"><a href="#设置远程仓库" class="headerlink" title="设置远程仓库"></a>设置远程仓库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">执行结果：</span><br><span class="line">Loaded plugins: fastestmirror, langpacks</span><br><span class="line">adding repo from: https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">grabbing file https://download.docker.com/linux/centos/docker-ce.repo to /etc/yum.repos.d/docker-ce.repo</span><br><span class="line">repo saved to /etc/yum.repos.d/docker-ce.repo</span><br></pre></td></tr></table></figure><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-io</span><br></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl start docker</span><br><span class="line">或者</span><br><span class="line">$ sudo service docker start</span><br><span class="line">service docker start        #启动docker</span><br><span class="line">chkconfig docker on         #加入开机启动</span><br></pre></td></tr></table></figure><h1 id="查看Docker版本"><a href="#查看Docker版本" class="headerlink" title="查看Docker版本"></a>查看Docker版本</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker --help #帮助</span><br><span class="line">docker –v #简单查看版本</span><br><span class="line">docker version #查看版本</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;h2 id=&quot;Docker需求配置&quot;&gt;&lt;a href=&quot;#Docker需求配置&quot; class=&quot;headerlink&quot; title=&quot;Docker需求配置&quot;&gt;&lt;/a&gt;Docker需求配置&lt;/h2&gt;&lt;p&gt;lunix内核，要求3.8以上&lt;br&gt;centos7&lt;br&gt;Docker是一个进程，一启动就两个进程，一个服务，一个守护进程。占用资源就非常少，启动速度非常快，1s。&lt;br&gt;一台机器上vm，3到10个实例。docker 100到10000。&lt;/p&gt;
    
    </summary>
    
    
      <category term="docker" scheme="https://luckybearbear.github.io/tags/docker/"/>
    
      <category term="Centos" scheme="https://luckybearbear.github.io/tags/Centos/"/>
    
  </entry>
  
  <entry>
    <title>windows安裝VMware</title>
    <link href="https://luckybearbear.github.io/2019/10/16/windows%E5%AE%89%E8%A3%9DVMware/"/>
    <id>https://luckybearbear.github.io/2019/10/16/windows安裝VMware/</id>
    <published>2019-10-16T04:21:09.000Z</published>
    <updated>2020-07-24T03:34:57.632Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装VMware12"><a href="#安装VMware12" class="headerlink" title="安装VMware12"></a>安装VMware12</h1> <a id="more"></a><p>傻瓜式安装！忽略</p><h1 id="安装Centos7"><a href="#安装Centos7" class="headerlink" title="安装Centos7"></a>安装Centos7</h1><h2 id="右击刚创建的虚拟机，选择设置"><a href="#右击刚创建的虚拟机，选择设置" class="headerlink" title="右击刚创建的虚拟机，选择设置"></a>右击刚创建的虚拟机，选择设置</h2><p>进入阿里云站点：<a href="http://mirrors.aliyun.com/centos/7/isos/x86_64/" target="_blank" rel="noopener">http://mirrors.aliyun.com/centos/7/isos/x86_64/</a>，选择 CentOS-7-x86_64-DVD-1804.iso下载<br><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20191016122705.png" alt></p><h2 id="点击开启此虚拟机"><a href="#点击开启此虚拟机" class="headerlink" title="点击开启此虚拟机"></a>点击开启此虚拟机</h2><p>执行常规安装操作<br><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20191016123425.png" alt></p><h2 id="桥接模式下设置固定ip"><a href="#桥接模式下设置固定ip" class="headerlink" title="桥接模式下设置固定ip"></a>桥接模式下设置固定ip</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi   /etc/sysconfig/network-scripts/ifcfg-ens33</span><br></pre></td></tr></table></figure><p>修改如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ONBOOT=yes  # 该网卡是否随网络服务启动</span><br><span class="line">IPADDR=192.168.220.101  # 该网卡ip地址就是你要配置的固定IP，如果你要用xshell等工具连接，220这个网段最好和你自己的电脑网段一致，否则有可能用xshell连接失败</span><br><span class="line">GATEWAY=192.168.220.2   # 网关</span><br><span class="line">NETMASK=255.255.255.0   # 子网掩码</span><br></pre></td></tr></table></figure><h2 id="重启网络服务"><a href="#重启网络服务" class="headerlink" title="重启网络服务"></a>重启网络服务</h2><pre><code>service network restart</code></pre><p>输入ifconfig显示如下代表成功<br><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20191016123949.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;安装VMware12&quot;&gt;&lt;a href=&quot;#安装VMware12&quot; class=&quot;headerlink&quot; title=&quot;安装VMware12&quot;&gt;&lt;/a&gt;安装VMware12&lt;/h1&gt;
    
    </summary>
    
    
      <category term="Centos" scheme="https://luckybearbear.github.io/tags/Centos/"/>
    
      <category term="VMware" scheme="https://luckybearbear.github.io/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>redis常见问题汇总</title>
    <link href="https://luckybearbear.github.io/2019/10/15/redis%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <id>https://luckybearbear.github.io/2019/10/15/redis常见问题汇总/</id>
    <published>2019-10-15T06:20:34.000Z</published>
    <updated>2020-07-24T03:34:57.630Z</updated>
    
    <content type="html"><![CDATA[<h1 id="服务没有及时响应启动或控制请求"><a href="#服务没有及时响应启动或控制请求" class="headerlink" title="服务没有及时响应启动或控制请求"></a>服务没有及时响应启动或控制请求</h1><p><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20191015142101.png" alt="问题1"><br>redis.windows.conf配置文件存在空格，去除空格即可。<br><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20191015142241.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;服务没有及时响应启动或控制请求&quot;&gt;&lt;a href=&quot;#服务没有及时响应启动或控制请求&quot; class=&quot;headerlink&quot; title=&quot;服务没有及时响应启动或控制请求&quot;&gt;&lt;/a&gt;服务没有及时响应启动或控制请求&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://
      
    
    </summary>
    
      <category term="redis" scheme="https://luckybearbear.github.io/categories/redis/"/>
    
    
      <category term="redis" scheme="https://luckybearbear.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>stackoverflow访问过慢</title>
    <link href="https://luckybearbear.github.io/2019/10/11/stackoverflow%E8%AE%BF%E9%97%AE%E8%BF%87%E6%85%A2/"/>
    <id>https://luckybearbear.github.io/2019/10/11/stackoverflow访问过慢/</id>
    <published>2019-10-11T07:49:59.000Z</published>
    <updated>2020-07-24T03:34:57.631Z</updated>
    
    <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>  stackoverflow是开发常用的提问和解决代码问题网站，但自己访问总是非常的慢，几十秒甚至几分钟。<br>  网站：<a href="https://stackoverflow.com/" target="_blank" rel="noopener">https://stackoverflow.com/</a></p><h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><h2 id="墙太厚"><a href="#墙太厚" class="headerlink" title="墙太厚"></a>墙太厚</h2><p>  stackoverflow只是访问速度很慢，但终归可以打开，如果被墙不可能最后打开的，所以排除。</p><h2 id="请求阻塞"><a href="#请求阻塞" class="headerlink" title="请求阻塞"></a>请求阻塞</h2><p>  访问jquery.min.js资源阻塞。<br>  host添加一下<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1       ajax.googleapis.com</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;  stackoverflow是开发常用的提问和解决代码问题网站，但自己访问总是非常的慢，几十秒甚至几分钟。&lt;br&gt;  网站：&lt;a href
      
    
    </summary>
    
    
      <category term="论坛" scheme="https://luckybearbear.github.io/tags/%E8%AE%BA%E5%9D%9B/"/>
    
  </entry>
  
  <entry>
    <title>double转integer</title>
    <link href="https://luckybearbear.github.io/2019/09/28/double%E8%BD%ACinteger/"/>
    <id>https://luckybearbear.github.io/2019/09/28/double转integer/</id>
    <published>2019-09-28T03:13:36.000Z</published>
    <updated>2020-07-24T03:34:57.629Z</updated>
    
    <content type="html"><![CDATA[<p>（1）把double先转化成int类型<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Double  reseve3=Double.parseDouble(bddet[0].getReserve3());</span><br><span class="line">int b=reseve3.intValue();</span><br></pre></td></tr></table></figure></p><p>（2）再把int类型转化为Integer类型<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer rentCount=Integer.valueOf(b);</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;（1）把double先转化成int类型&lt;br&gt;  &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;l
      
    
    </summary>
    
      <category term="JAVA" scheme="https://luckybearbear.github.io/categories/JAVA/"/>
    
    
      <category term="JAVA" scheme="https://luckybearbear.github.io/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>琦玉锻炼法</title>
    <link href="https://luckybearbear.github.io/2019/09/09/%E7%90%A6%E7%8E%89%E9%94%BB%E7%82%BC%E6%B3%95/"/>
    <id>https://luckybearbear.github.io/2019/09/09/琦玉锻炼法/</id>
    <published>2019-09-09T13:44:48.000Z</published>
    <updated>2020-07-24T03:34:57.633Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20190909214955.png" alt="琦玉监督"></p><h1 id="琦玉老师锻炼法"><a href="#琦玉老师锻炼法" class="headerlink" title="琦玉老师锻炼法"></a>琦玉老师锻炼法</h1><p>每天坚持100个仰卧起坐，100个俯卧撑，100个蹲下起立，还有10公里的长跑。</p><h1 id="改进版"><a href="#改进版" class="headerlink" title="改进版"></a>改进版</h1><p>每天坚持30个仰卧起坐，30个俯卧撑，30个蹲下起立，还有2公里的短跑。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20190909214955.png&quot; alt=&quot;琦玉监督&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;琦玉老师锻炼法&quot;&gt;&lt;a href=&quot;#
      
    
    </summary>
    
    
      <category term="锻炼" scheme="https://luckybearbear.github.io/tags/%E9%94%BB%E7%82%BC/"/>
    
  </entry>
  
  <entry>
    <title>常用工具</title>
    <link href="https://luckybearbear.github.io/2019/08/29/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    <id>https://luckybearbear.github.io/2019/08/29/常用工具/</id>
    <published>2019-08-29T07:56:59.000Z</published>
    <updated>2020-07-24T03:34:57.633Z</updated>
    
    <content type="html"><![CDATA[<table><thead><tr><th><strong>工具</strong></th><th><strong>说明</strong></th><th><strong>官网</strong></th></tr></thead><tbody><tr><td>IDEA</td><td>开发IDE</td><td><a href="https://www.jetbrains.com/idea/download" target="_blank" rel="noopener">https://www.jetbrains.com/idea/download</a></td></tr><tr><td>Robomongo</td><td>mongo客户端连接工具</td><td><a href="https://robomongo.org/download" target="_blank" rel="noopener">https://robomongo.org/download</a></td></tr><tr><td>SwitchHosts</td><td>本地host管理</td><td><a href="https://oldj.github.io/SwitchHosts/" target="_blank" rel="noopener">https://oldj.github.io/SwitchHosts/</a></td></tr><tr><td>PowerDesigner</td><td>数据库设计工具</td><td><a href="http://powerdesigner.de/" target="_blank" rel="noopener">http://powerdesigner.de/</a></td></tr><tr><td>Axure</td><td>原型设计工具</td><td><a href="https://www.axure.com/" target="_blank" rel="noopener">https://www.axure.com/</a></td></tr><tr><td>MindMaster</td><td>思维导图设计工具</td><td><a href="http://www.edrawsoft.cn/mindmaster" target="_blank" rel="noopener">http://www.edrawsoft.cn/mindmaster</a></td></tr><tr><td>ScreenToGif</td><td>gif录制工具</td><td><a href="https://www.screentogif.com/" target="_blank" rel="noopener">https://www.screentogif.com/</a></td></tr><tr><td>ProcessOn</td><td>流程图绘制工具</td><td><a href="https://www.processon.com/" target="_blank" rel="noopener">https://www.processon.com/</a></td></tr><tr><td>PicPick</td><td>屏幕取色工具</td><td><a href="https://picpick.app/zh/" target="_blank" rel="noopener">https://picpick.app/zh/</a></td></tr><tr><td>draw.io</td><td>绘图</td><td><a href="https://www.draw.io/" target="_blank" rel="noopener">https://www.draw.io/</a></td></tr><tr><td>logomakr</td><td>Logo</td><td><a href="https://logomakr.com/" target="_blank" rel="noopener">https://logomakr.com/</a></td></tr><tr><td>PicGo</td><td>图床</td><td><a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noopener">https://github.com/Molunerfinn/PicGo/releases</a></td></tr><tr><td>Typora</td><td>markdown工具</td><td><a href="https://www.typora.io/" target="_blank" rel="noopener">https://www.typora.io/</a></td></tr><tr><td>finalShell</td><td>远程工具</td><td><a href="http://www.hostbuf.com/" target="_blank" rel="noopener">http://www.hostbuf.com/</a></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;工具&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;说明&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;官网&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;I
      
    
    </summary>
    
    
      <category term="工具" scheme="https://luckybearbear.github.io/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>PhantomJSDriver自动生成echart图片</title>
    <link href="https://luckybearbear.github.io/2019/08/29/PhantomJSDriver%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90echart%E5%9B%BE%E7%89%87/"/>
    <id>https://luckybearbear.github.io/2019/08/29/PhantomJSDriver自动生成echart图片/</id>
    <published>2019-08-29T07:06:08.000Z</published>
    <updated>2020-07-24T03:34:57.628Z</updated>
    
    <content type="html"><![CDATA[<h1 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.codeborne&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;phantomjsdriver&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.2.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;xml-apis&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.4.01&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="公共方法"><a href="#公共方法" class="headerlink" title="公共方法"></a>公共方法</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.pexetech.core.util.EmptyUtils;</span><br><span class="line"><span class="keyword">import</span> com.pexetech.core.util.PropertiesFileUtil;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.JavascriptExecutor;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.phantomjs.PhantomJSDriver;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.phantomjs.PhantomJSDriverService;</span><br><span class="line"><span class="keyword">import</span> org.openqa.selenium.remote.DesiredCapabilities;</span><br><span class="line"><span class="keyword">import</span> sun.misc.BASE64Decoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * describe: saveSurfModelUrlToImgUtil</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zj</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/05/23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PhantomJSDriverUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> surfData echart所需数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> basePath 访问路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> telPath 模板路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 存储路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">saveSurfModelUrlToImg</span><span class="params">(String surfData,String basePath,String telPath,String code)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; imageBase64List = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        PhantomJSDriver driver=getPhantomJSDriver();</span><br><span class="line">        <span class="comment">// 让浏览器访问空间主页</span></span><br><span class="line">        driver.manage().timeouts().implicitlyWait(<span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line">        driver.get(basePath+telPath);</span><br><span class="line">        JavascriptExecutor js = (JavascriptExecutor) driver;</span><br><span class="line">        <span class="comment">//设置surf数据到页面</span></span><br><span class="line">        driver.manage().timeouts().implicitlyWait(<span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line">        <span class="comment">//展示echarts</span></span><br><span class="line">        js.executeScript(<span class="string">"showImg("</span>+surfData+<span class="string">")"</span>);</span><br><span class="line">        <span class="comment">//加入一段休眠时间，防止js执行没完成就进行的 读取echart图片数据的功能。</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获取echart图片数据</span></span><br><span class="line"></span><br><span class="line">        driver.manage().timeouts().implicitlyWait(<span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line">        String phTxt=(String) js.executeScript(<span class="string">"return returnEchartImg(rhEcharts)"</span>);</span><br><span class="line">        <span class="comment">//imageBase64放到list中</span></span><br><span class="line">        imageBase64List.add(phTxt.replace(<span class="string">"data:image/png;base64,"</span>,<span class="string">""</span>));</span><br><span class="line">        <span class="comment">//获取图片存储路径</span></span><br><span class="line">        String imgName = System.currentTimeMillis()+<span class="string">".png"</span>;</span><br><span class="line">        String imgpath =<span class="string">""</span>;</span><br><span class="line">        String osname = System.getProperties().getProperty(<span class="string">"os.name"</span>);</span><br><span class="line">        <span class="comment">//判断系统的环境win or Linux</span></span><br><span class="line">        <span class="keyword">if</span> (osname.equals(<span class="string">"Linux"</span>)) &#123;</span><br><span class="line">            imgpath = PropertiesFileUtil.getInstance().get(<span class="string">"fileRoot"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            imgpath = <span class="string">"D:\\fileRoot"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String imgFilePath = imgpath+File.separator+code+ File.separator+imgName;</span><br><span class="line">        Base64ToImage(phTxt.replace(<span class="string">"data:image/png;base64,"</span>,<span class="string">""</span>),imgFilePath,imgpath+File.separator+code);</span><br><span class="line">        driver.close();</span><br><span class="line">        driver.quit();</span><br><span class="line">        imgFilePath =  basePath+<span class="string">"/showPicture/detail?imgFile="</span>+URLEncoder.encode(imgFilePath);</span><br><span class="line">        <span class="keyword">return</span> imgFilePath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span>  PhantomJSDriver <span class="title">getPhantomJSDriver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//设置必要参数</span></span><br><span class="line">        DesiredCapabilities dcaps = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">        <span class="comment">//ssl证书支持</span></span><br><span class="line">        dcaps.setCapability(<span class="string">"acceptSslCerts"</span>, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//截屏支持</span></span><br><span class="line">        dcaps.setCapability(<span class="string">"takesScreenshot"</span>, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//css搜索支持</span></span><br><span class="line">        dcaps.setCapability(<span class="string">"cssSelectorsEnabled"</span>, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//js支持</span></span><br><span class="line">        dcaps.setJavascriptEnabled(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//驱动支持</span></span><br><span class="line">        String osname = System.getProperties().getProperty(<span class="string">"os.name"</span>);</span><br><span class="line">        <span class="comment">//判断系统的环境win or Linux</span></span><br><span class="line">        <span class="keyword">if</span> (osname.equals(<span class="string">"Linux"</span>)) &#123;</span><br><span class="line">            dcaps.setCapability(PhantomJSDriverService.PHANTOMJS_EXECUTABLE_PATH_PROPERTY,<span class="string">"/usr/bin/phantomjs"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            dcaps.setCapability(PhantomJSDriverService.PHANTOMJS_EXECUTABLE_PATH_PROPERTY,<span class="string">"D:\\phantomjs-2.1.1-windows\\bin\\phantomjs.exe"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//创建无界面浏览器对象</span></span><br><span class="line">        PhantomJSDriver driver = <span class="keyword">new</span> PhantomJSDriver(dcaps);</span><br><span class="line">        <span class="keyword">return</span>  driver;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * base64字符串转换成图片</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> imgStrbase64字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> imgFilePath图片存放路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">Base64ToImage</span><span class="params">(String imgStr,String imgFilePath,String savePth)</span> </span>&#123; <span class="comment">// 对字节数组字符串进行Base64解码并生成图片</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 图像数据为空</span></span><br><span class="line">        <span class="keyword">if</span> (EmptyUtils.isEmpty(imgStr))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        File saveFile = <span class="keyword">new</span> File(savePth);</span><br><span class="line">        <span class="keyword">if</span> (!saveFile.exists())&#123;</span><br><span class="line">            saveFile.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        BASE64Decoder decoder = <span class="keyword">new</span> BASE64Decoder();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Base64解码</span></span><br><span class="line">            <span class="keyword">byte</span>[] b = decoder.decodeBuffer(imgStr);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; b.length; ++i) &#123;</span><br><span class="line">                <span class="comment">// 调整异常数据</span></span><br><span class="line">                <span class="keyword">if</span> (b[i] &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    b[i] += <span class="number">256</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            OutputStream out = <span class="keyword">new</span> FileOutputStream(imgFilePath);</span><br><span class="line">            out.write(b);</span><br><span class="line">            out.flush();</span><br><span class="line">            out.close();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="html写法"><a href="#html写法" class="headerlink" title="html写法"></a>html写法</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnEchartImg</span>(<span class="params">echartObj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> echartObj.getDataURL();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="问题汇总"><a href="#问题汇总" class="headerlink" title="问题汇总"></a>问题汇总</h1><h2 id="echart图片在outlook客户端查看是显示黑底"><a href="#echart图片在outlook客户端查看是显示黑底" class="headerlink" title="echart图片在outlook客户端查看是显示黑底"></a>echart图片在outlook客户端查看是显示黑底</h2><p>option 缺少 <code>backgroundColor:&#39;#FFFFFF&#39;,</code></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;依赖&quot;&gt;&lt;a href=&quot;#依赖&quot; class=&quot;headerlink&quot; title=&quot;依赖&quot;&gt;&lt;/a&gt;依赖&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;lt;groupId&amp;gt;com.codeborne&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;lt;artifactId&amp;gt;phantomjsdriver&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;lt;version&amp;gt;1.2.1&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;lt;groupId&amp;gt;xml-apis&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;lt;artifactId&amp;gt;xml-apis&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;lt;version&amp;gt;1.4.01&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="JAVA" scheme="https://luckybearbear.github.io/categories/JAVA/"/>
    
    
      <category term="PhantomJS" scheme="https://luckybearbear.github.io/tags/PhantomJS/"/>
    
  </entry>
  
  <entry>
    <title>react-native 0.42 整合极光推送</title>
    <link href="https://luckybearbear.github.io/2019/08/29/react-native%E6%95%B4%E5%90%88%E6%9E%81%E5%85%89%E6%8E%A8%E9%80%81/"/>
    <id>https://luckybearbear.github.io/2019/08/29/react-native整合极光推送/</id>
    <published>2019-08-29T06:44:20.000Z</published>
    <updated>2020-07-24T03:34:57.630Z</updated>
    
    <content type="html"><![CDATA[<h1 id="极光推送官网注册应用"><a href="#极光推送官网注册应用" class="headerlink" title="极光推送官网注册应用"></a><a href="https://www.jiguang.cn" target="_blank" rel="noopener">极光推送官网</a>注册应用</h1><a id="more"></a><h1 id="配置jpush-react-native"><a href="#配置jpush-react-native" class="headerlink" title="配置jpush-react-native"></a>配置jpush-react-native</h1><p>github地址：<a href="https://link.jianshu.com/?t=https://github.com/jpush/jpush-react-native" target="_blank" rel="noopener">https://github.com/jpush/jpush-react-native</a><br>同样的，打开终端在项目根目录下输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install jcore-react-native@1.0.0 --save</span><br><span class="line">npm install jpush-react-native@1.5.0 --save</span><br></pre></td></tr></table></figure><p>下载完成后，按1、2、3的顺序修改如下文件：</p><p><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_15670615598134.png" alt="操作顺序图"></p><h2 id="在1中修改如下："><a href="#在1中修改如下：" class="headerlink" title="在1中修改如下："></a>在1中修改如下：</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">include <span class="string">':jpush-react-native'</span></span><br><span class="line">project(<span class="string">':jpush-react-native'</span>).projectDir = <span class="keyword">new</span> File(rootProject.projectDir, <span class="string">'../node_modules/jpush-react-native/android'</span>)</span><br><span class="line">include <span class="string">':jcore-react-native'</span></span><br><span class="line">project(<span class="string">':jcore-react-native'</span>).projectDir = <span class="keyword">new</span> File(rootProject.projectDir, <span class="string">'../node_modules/jcore-react-native/android'</span>)</span><br></pre></td></tr></table></figure><h2 id="在2中修改如下："><a href="#在2中修改如下：" class="headerlink" title="在2中修改如下："></a>在2中修改如下：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId &quot;yourApplicationId&quot; //就是在极光注册的包名</span><br><span class="line">        ...</span><br><span class="line">        manifestPlaceholders = [</span><br><span class="line">                JPUSH_APPKEY: &quot;yourAppKey&quot;, //在此替换你的APPKey</span><br><span class="line">                APP_CHANNEL: &quot;developer-default&quot;    //应用渠道号</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])</span><br><span class="line">    compile project(&apos;:jpush-react-native&apos;)</span><br><span class="line">    compile project(&apos;:jcore-react-native&apos;)</span><br><span class="line">    compile &quot;com.facebook.react:react-native:+&quot;  // From node_modules</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在3中修改如下："><a href="#在3中修改如下：" class="headerlink" title="在3中修改如下："></a>在3中修改如下：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--添加通知权限，$&#123;ApplicationID&#125;替换成你的applicationID!--&gt;</span><br><span class="line">   &lt;premission </span><br><span class="line">       android:name=&quot;$&#123;ApplicationID&#125;.permission.JPUSH_MESSAGE&quot;</span><br><span class="line">       android:protectionLevel=&quot;signature&quot;/&gt;</span><br><span class="line"></span><br><span class="line">   &lt;application</span><br><span class="line">       ...</span><br><span class="line">       &gt;</span><br><span class="line">       ...</span><br><span class="line">       &lt;!-- Required . Enable it you can get statistics data with channel --&gt;</span><br><span class="line">       &lt;meta-data android:name=&quot;JPUSH_CHANNEL&quot; android:value=&quot;$&#123;APP_CHANNEL&#125;&quot;/&gt;</span><br><span class="line">       &lt;meta-data android:name=&quot;JPUSH_APPKEY&quot; android:value=&quot;$&#123;JPUSH_APPKEY&#125;&quot;/&gt;</span><br><span class="line">   &lt;/application&gt;</span><br></pre></td></tr></table></figure><h2 id="打开MainApplication-java，修改如下："><a href="#打开MainApplication-java，修改如下：" class="headerlink" title="打开MainApplication.java，修改如下："></a>打开MainApplication.java，修改如下：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">        protected List&lt;ReactPackage&gt; getPackages() &#123;</span><br><span class="line">            return Arrays.&lt;ReactPackage&gt;asList(</span><br><span class="line">                    new MainReactPackage(),</span><br><span class="line">                    new JPushPackage(false,false)</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;极光推送官网注册应用&quot;&gt;&lt;a href=&quot;#极光推送官网注册应用&quot; class=&quot;headerlink&quot; title=&quot;极光推送官网注册应用&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.jiguang.cn&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;极光推送官网&lt;/a&gt;注册应用&lt;/h1&gt;
    
    </summary>
    
    
      <category term="react-native" scheme="https://luckybearbear.github.io/tags/react-native/"/>
    
  </entry>
  
  <entry>
    <title>生成二维码</title>
    <link href="https://luckybearbear.github.io/2019/08/29/%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81/"/>
    <id>https://luckybearbear.github.io/2019/08/29/生成二维码/</id>
    <published>2019-08-29T02:10:22.000Z</published>
    <updated>2020-07-24T03:34:57.633Z</updated>
    
    <content type="html"><![CDATA[<h1 id="所需依赖"><a href="#所需依赖" class="headerlink" title="所需依赖"></a>所需依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.zxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure> <a id="more"></a><h1 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics2D;</span><br><span class="line"><span class="keyword">import</span> java.awt.Image;</span><br><span class="line"><span class="keyword">import</span> java.awt.RenderingHints;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.zxing.BarcodeFormat;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.EncodeHintType;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.MultiFormatWriter;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.WriterException;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.common.BitMatrix;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 二维码工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QrCodeUtil</span></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BLACK = <span class="number">0xFF000000</span>;  </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> WHITE = <span class="number">0xFFFFFFFF</span>;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成二维码图片</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> content  内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> width    二维码图片宽度  如果有logo图片,不应低于250</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> height   二维码图片高度  如果有logo图片,不应低于250</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> logo     二维码上面的logo  可选</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>  二维码图片</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BufferedImage <span class="title">toBufferedImage</span><span class="params">(String content,<span class="keyword">int</span> width,<span class="keyword">int</span> height,Image logo)</span> </span>&#123;</span><br><span class="line">MultiFormatWriter multiFormatWriter = <span class="keyword">new</span> MultiFormatWriter();</span><br><span class="line">Map&lt;EncodeHintType, String&gt; hints = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"><span class="comment">//内容所使用编码  </span></span><br><span class="line">hints.put(EncodeHintType.CHARACTER_SET, <span class="string">"UTF-8"</span>); </span><br><span class="line">BitMatrix matrix =<span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">matrix = multiFormatWriter.encode(content,BarcodeFormat.QR_CODE, width, height, hints);</span><br><span class="line">&#125; <span class="keyword">catch</span> (WriterException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(matrix == <span class="keyword">null</span>)&#123;<span class="keyword">return</span> <span class="keyword">null</span>;&#125;</span><br><span class="line"></span><br><span class="line">BufferedImage image = <span class="keyword">new</span> BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);  </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; width; x++) &#123;  </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt; height; y++) &#123;  </span><br><span class="line">image.setRGB(x, y, matrix.get(x, y) ? BLACK : WHITE);  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//二维码上面添加logo</span></span><br><span class="line"><span class="keyword">if</span>(logo!=<span class="keyword">null</span>)&#123;</span><br><span class="line"><span class="comment">//缩小logo大小 构建图片流</span></span><br><span class="line">BufferedImage tag = <span class="keyword">new</span> BufferedImage(<span class="number">33</span>, <span class="number">33</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class="line"><span class="comment">//绘制改变尺寸后的图</span></span><br><span class="line">tag.getGraphics().drawImage(logo, <span class="number">0</span>, <span class="number">0</span>, <span class="number">33</span>, <span class="number">33</span>, <span class="keyword">null</span>);</span><br><span class="line">Graphics2D g = image.createGraphics(); <span class="comment">//画笔对象</span></span><br><span class="line"><span class="comment">// 设置对线段的锯齿状边缘处理   </span></span><br><span class="line">g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR); </span><br><span class="line">g.drawImage(logo, (width-tag.getWidth(<span class="keyword">null</span>))/<span class="number">2</span>, (height-tag.getHeight(<span class="keyword">null</span>))/<span class="number">2</span>, tag.getWidth(<span class="keyword">null</span>), tag.getHeight(<span class="keyword">null</span>), <span class="keyword">null</span>);</span><br><span class="line">g.dispose();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> image;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成二维码,并保存为文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> content  二维码包含的内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> width    二维码图片宽度  如果有logo图片,不应低于250</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> height   二维码图片高度  如果有logo图片,不应低于250</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> format   生成二维码图片的扩展名  如jpg/png等</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> file     二维码保存文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> logo     logo图片  可选</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">writeToFile</span><span class="params">(String content,<span class="keyword">int</span> width,<span class="keyword">int</span> height,String format,File file,Image logo)</span></span>&#123;  </span><br><span class="line"></span><br><span class="line">BufferedImage image = toBufferedImage(content,width,height,logo);  </span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">ImageIO.write(image, format, file);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成二维码,并写到流中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content   二维码包含的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> width     二维码图片宽度  如果有logo图片,不应低于250</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> height    二维码图片高度  如果有logo图片,不应低于250</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> format    生成二维码图片的扩展名  如jpg/png等</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stream    输出流</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> logo      logo图片  可选</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">writeToStream</span><span class="params">(String content,<span class="keyword">int</span> width,<span class="keyword">int</span> height, String format,OutputStream outPutstream,Image logo)</span>  </span></span><br><span class="line"><span class="function"> </span>&#123;  </span><br><span class="line">BufferedImage image = toBufferedImage(content,width,height,logo);  </span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">ImageIO.write(image, format, outPutstream);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="调用实例"><a href="#调用实例" class="headerlink" title="调用实例"></a>调用实例</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">try &#123;</span><br><span class="line">String content = &quot;http://gys.zjtcn.com/project/detail/SZLHXQ22_gcxx_t_current_p1.html&quot;; </span><br><span class="line">//二维码保存位置  </span><br><span class="line">File outputFile = new File(&quot;d:/14.jpg&quot;); </span><br><span class="line">           </span><br><span class="line">writeToFile(content, 250,250,&quot;png&quot;,outputFile,ImageIO.read(new File(&quot;D:/qrcode_logo.png&quot;)));  </span><br><span class="line">writeToStream(content, 250, 250, &quot;png&quot;, System.out, ImageIO.read(new File(&quot;D:/qrcode_logo.png&quot;)));</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;所需依赖&quot;&gt;&lt;a href=&quot;#所需依赖&quot; class=&quot;headerlink&quot; title=&quot;所需依赖&quot;&gt;&lt;/a&gt;所需依赖&lt;/h1&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;com.google.zxing&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;core&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;3.3.0&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="JAVA" scheme="https://luckybearbear.github.io/categories/JAVA/"/>
    
    
      <category term="JAVA" scheme="https://luckybearbear.github.io/tags/JAVA/"/>
    
      <category term="二维码" scheme="https://luckybearbear.github.io/tags/%E4%BA%8C%E7%BB%B4%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>JAVA学习记录</title>
    <link href="https://luckybearbear.github.io/2019/08/17/JAVA%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <id>https://luckybearbear.github.io/2019/08/17/JAVA学习记录/</id>
    <published>2019-08-17T12:34:53.000Z</published>
    <updated>2020-07-24T03:34:57.627Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="JAVA" scheme="https://luckybearbear.github.io/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>webService实战</title>
    <link href="https://luckybearbear.github.io/2019/08/10/webService%E5%AE%9E%E6%88%98/"/>
    <id>https://luckybearbear.github.io/2019/08/10/webService实战/</id>
    <published>2019-08-10T07:39:53.000Z</published>
    <updated>2020-07-24T03:34:57.632Z</updated>
    
    <content type="html"><![CDATA[<h1 id="所需依赖"><a href="#所需依赖" class="headerlink" title="所需依赖"></a>所需依赖</h1> <a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;commons-logging&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.2&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;commons-discovery&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;commons-discovery&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;0.5&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.ws.xmlschema&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;xmlschema-core&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.2.1&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;xstream&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.4.10&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.axis&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;axis&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.4&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.2.7&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.2.7&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;cxf-rt-transports-http-jetty&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.2.7&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;javax.xml&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jaxrpc-api&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.1&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h1 id="定义实体、公共方法"><a href="#定义实体、公共方法" class="headerlink" title="定义实体、公共方法"></a>定义实体、公共方法</h1><p><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20190810154550.png" alt="定义实体、公共方法"></p><h2 id="model"><a href="#model" class="headerlink" title="model"></a>model</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Project:&lt;记录接口传送结果或内容&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * Comments:&lt;&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RealtechMiot</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> WSRequest wsRequest;</span><br><span class="line"><span class="keyword">private</span> WSResult wsResult;</span><br><span class="line"><span class="keyword">private</span> List&lt;T&gt; datas;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">RealtechMiot</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">RealtechMiot</span><span class="params">(WSRequest wsRequest, List&lt;T&gt; datas)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.wsRequest = wsRequest;</span><br><span class="line"><span class="keyword">this</span>.datas = datas;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">RealtechMiot</span><span class="params">(WSResult wsResult, List&lt;T&gt; datas)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.wsResult = wsResult;</span><br><span class="line"><span class="keyword">this</span>.datas = datas;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> WSRequest <span class="title">getWsRequest</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.wsRequest;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWsRequest</span><span class="params">(WSRequest wsRequest)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.wsRequest = wsRequest;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> WSResult <span class="title">getWsResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.wsResult;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWsResult</span><span class="params">(WSResult wsResult)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.wsResult = wsResult;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">getDatas</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.datas;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDatas</span><span class="params">(List&lt;T&gt; datas)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.datas = datas;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.annotations.XStreamAlias;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Project:&lt;接口&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Comments:&lt;用来传送信息&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@XStreamAlias</span>(<span class="string">"head"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WSRequest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WSRequest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WSRequest</span><span class="params">(String function_id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.function_id = function_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WSRequest</span><span class="params">(String function_id, String version)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.function_id = function_id;</span><br><span class="line">        <span class="keyword">this</span>.version = version;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XStreamAlias</span>(<span class="string">"function_id"</span>)</span><br><span class="line">    <span class="keyword">private</span> String function_id;<span class="comment">// 方法名</span></span><br><span class="line">    <span class="keyword">private</span> String version;<span class="comment">// 方法版本</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFunction_id</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.function_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFunction_id</span><span class="params">(String function_id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.function_id = function_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getVersion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.version;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVersion</span><span class="params">(String version)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.version = version;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.annotations.XStreamAlias;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Project:&lt;接口&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Comments:&lt;用来记录接口返回的结果&gt;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@XStreamAlias</span>(<span class="string">"head"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WSResult</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WSResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WSResult</span><span class="params">(<span class="keyword">boolean</span> success, String code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.success = success;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WSResult</span><span class="params">(<span class="keyword">boolean</span> success, String code, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.success = success;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> success;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSuccess</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> success;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuccess</span><span class="params">(<span class="keyword">boolean</span> success)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.success = success;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(String code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Project:&lt;接口&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * Comments:&lt;用来记录接口返回的结果&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> data 一般为一个json或jsonArrayList</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlResult</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> success;</span><br><span class="line"><span class="keyword">private</span> String msg;</span><br><span class="line"><span class="keyword">private</span> Object data;</span><br><span class="line"><span class="keyword">private</span> String errorCode;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">XmlResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">XmlResult</span><span class="params">(<span class="keyword">boolean</span> success, String msg, Object data, String errorCode)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.success = success;</span><br><span class="line"><span class="keyword">this</span>.msg = msg;</span><br><span class="line"><span class="keyword">this</span>.data = data;</span><br><span class="line"><span class="keyword">this</span>.errorCode = errorCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">XmlResult</span><span class="params">(<span class="keyword">boolean</span> success, String msg)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>();</span><br><span class="line"><span class="keyword">this</span>.success = success;</span><br><span class="line"><span class="keyword">this</span>.msg = msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">XmlResult</span><span class="params">(<span class="keyword">boolean</span> success, String msg, Object data)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>();</span><br><span class="line"><span class="keyword">this</span>.success = success;</span><br><span class="line"><span class="keyword">this</span>.msg = msg;</span><br><span class="line"><span class="keyword">this</span>.data = data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSuccess</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> success;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuccess</span><span class="params">(<span class="keyword">boolean</span> success)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.success = success;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.msg = msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(Object data)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.data = data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getErrorCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> errorCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setErrorCode</span><span class="params">(String errorCode)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.errorCode = errorCode;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="util"><a href="#util" class="headerlink" title="util"></a>util</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.w3c.dom.Document;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Element;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Node;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.InputSource;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.SAXException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilder;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilderFactory;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.ParserConfigurationException;</span><br><span class="line"><span class="keyword">import</span> javax.xml.transform.OutputKeys;</span><br><span class="line"><span class="keyword">import</span> javax.xml.transform.Transformer;</span><br><span class="line"><span class="keyword">import</span> javax.xml.transform.TransformerConfigurationException;</span><br><span class="line"><span class="keyword">import</span> javax.xml.transform.TransformerFactory;</span><br><span class="line"><span class="keyword">import</span> javax.xml.transform.dom.DOMSource;</span><br><span class="line"><span class="keyword">import</span> javax.xml.transform.stream.StreamResult;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DOMUtils</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化一个空Document对象返回。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a Document</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Document <span class="title">newXMLDocument</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> newDocumentBuilder().newDocument();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (ParserConfigurationException e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化一个DocumentBuilder</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a DocumentBuilder</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ParserConfigurationException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DocumentBuilder <span class="title">newDocumentBuilder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> ParserConfigurationException </span>&#123;</span><br><span class="line"><span class="keyword">return</span> newDocumentBuilderFactory().newDocumentBuilder();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化一个DocumentBuilderFactory</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a DocumentBuilderFactory</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DocumentBuilderFactory <span class="title">newDocumentBuilderFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();</span><br><span class="line">dbf.setNamespaceAware(<span class="keyword">true</span>);</span><br><span class="line"><span class="keyword">return</span> dbf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将传入的一个XML String转换成一个org.w3c.dom.Document对象返回。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> xmlString</span></span><br><span class="line"><span class="comment"> *            一个符合XML规范的字符串表达。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a Document</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Document <span class="title">parseXMLDocument</span><span class="params">(String xmlString)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (xmlString == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> newDocumentBuilder().parse(</span><br><span class="line"><span class="keyword">new</span> InputSource(<span class="keyword">new</span> StringReader(xmlString)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给定一个输入流，解析为一个org.w3c.dom.Document对象返回。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> input</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a org.w3c.dom.Document</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Document <span class="title">parseXMLDocument</span><span class="params">(InputStream input)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (input == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"参数为null！"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> newDocumentBuilder().parse(input);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给定一个文件名，获取该文件并解析为一个org.w3c.dom.Document对象返回。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment"> *            待解析文件的文件名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a org.w3c.dom.Document</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Document <span class="title">loadXMLDocumentFromFile</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (fileName == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"未指定文件名及其物理路径！"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">return</span> newDocumentBuilder().parse(<span class="keyword">new</span> File(fileName));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (SAXException e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"目标文件（"</span> + fileName</span><br><span class="line">+ <span class="string">"）不能被正确解析为XML！"</span> + e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"不能获取目标文件（"</span> + fileName + <span class="string">"）！"</span></span><br><span class="line">+ e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (ParserConfigurationException e) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 把dom文件转换为xml字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toStringFromDoc</span><span class="params">(Document document)</span> </span>&#123;</span><br><span class="line">String result = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (document != <span class="keyword">null</span>) &#123;</span><br><span class="line">StringWriter strWtr = <span class="keyword">new</span> StringWriter();</span><br><span class="line">StreamResult strResult = <span class="keyword">new</span> StreamResult(strWtr);</span><br><span class="line">TransformerFactory tfac = TransformerFactory.newInstance();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Transformer t = tfac.newTransformer();</span><br><span class="line">t.setOutputProperty(OutputKeys.ENCODING, <span class="string">"UTF-8"</span>);</span><br><span class="line">t.setOutputProperty(OutputKeys.INDENT, <span class="string">"yes"</span>);</span><br><span class="line">t.setOutputProperty(OutputKeys.METHOD, <span class="string">"xml"</span>); <span class="comment">// xml, html,</span></span><br><span class="line"><span class="comment">// text</span></span><br><span class="line">t.setOutputProperty(</span><br><span class="line"><span class="string">"&#123;http://xml.apache.org/xslt&#125;indent-amount"</span>, <span class="string">"4"</span>);</span><br><span class="line">t.transform(<span class="keyword">new</span> DOMSource(document.getDocumentElement()),</span><br><span class="line">strResult);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">System.err.println(<span class="string">"XML.toString(Document): "</span> + e);</span><br><span class="line">&#125;</span><br><span class="line">result = strResult.getWriter().toString();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">strWtr.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 把dom文件转换为xml字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toStringFromDoc</span><span class="params">(Element element)</span> </span>&#123;</span><br><span class="line">String result = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (element != <span class="keyword">null</span>) &#123;</span><br><span class="line">StringWriter strWtr = <span class="keyword">new</span> StringWriter();</span><br><span class="line">StreamResult strResult = <span class="keyword">new</span> StreamResult(strWtr);</span><br><span class="line">TransformerFactory tfac = TransformerFactory.newInstance();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Transformer t = tfac.newTransformer();</span><br><span class="line">t.setOutputProperty(OutputKeys.ENCODING, <span class="string">"UTF-8"</span>);</span><br><span class="line">t.setOutputProperty(OutputKeys.INDENT, <span class="string">"yes"</span>);</span><br><span class="line">t.setOutputProperty(OutputKeys.METHOD, <span class="string">"xml"</span>); <span class="comment">// xml, html,</span></span><br><span class="line"><span class="comment">// text</span></span><br><span class="line">t.setOutputProperty(</span><br><span class="line"><span class="string">"&#123;http://xml.apache.org/xslt&#125;indent-amount"</span>, <span class="string">"4"</span>);</span><br><span class="line">t.transform(<span class="keyword">new</span> DOMSource(element), strResult);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">System.err.println(<span class="string">"XML.toString(Document): "</span> + e);</span><br><span class="line">&#125;</span><br><span class="line">result = strResult.getWriter().toString();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">strWtr.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给定一个节点，将该节点加入新构造的Document中。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node</span></span><br><span class="line"><span class="comment"> *            a Document node</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a new Document</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Document <span class="title">newXMLDocument</span><span class="params">(Node node)</span> </span>&#123;</span><br><span class="line">Document doc = newXMLDocument();</span><br><span class="line">doc.appendChild(doc.importNode(node, <span class="keyword">true</span>));</span><br><span class="line"><span class="keyword">return</span> doc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将传入的一个DOM Node对象输出成字符串。如果失败则返回一个空字符串""。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node</span></span><br><span class="line"><span class="comment"> *            DOM Node 对象。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a XML String from node</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * public static String toString(Node node) &#123; if (node == null) &#123; throw new</span></span><br><span class="line"><span class="comment"> * IllegalArgumentException(); &#125; Transformer transformer = new</span></span><br><span class="line"><span class="comment"> * Transformer(); if (transformer != null) &#123; try &#123; StringWriter sw = new</span></span><br><span class="line"><span class="comment"> * StringWriter(); transformer .transform(new DOMSource(node), new</span></span><br><span class="line"><span class="comment"> * StreamResult(sw)); return sw.toString(); &#125; catch (TransformerException</span></span><br><span class="line"><span class="comment"> * te) &#123; throw new RuntimeException(te.getMessage()); &#125; &#125; return ""; &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将传入的一个DOM Node对象输出成字符串。如果失败则返回一个空字符串""。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node</span></span><br><span class="line"><span class="comment"> *            DOM Node 对象。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a XML String from node</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * public static String toString(Node node) &#123; if (node == null) &#123; throw new</span></span><br><span class="line"><span class="comment"> * IllegalArgumentException(); &#125; Transformer transformer = new</span></span><br><span class="line"><span class="comment"> * Transformer(); if (transformer != null) &#123; try &#123; StringWriter sw = new</span></span><br><span class="line"><span class="comment"> * StringWriter(); transformer .transform(new DOMSource(node), new</span></span><br><span class="line"><span class="comment"> * StreamResult(sw)); return sw.toString(); &#125; catch (TransformerException</span></span><br><span class="line"><span class="comment"> * te) &#123; throw new RuntimeException(te.getMessage()); &#125; &#125; return ""; &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取一个Transformer对象，由于使用时都做相同的初始化，所以提取出来作为公共方法。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a Transformer encoding gb2312</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Transformer <span class="title">newTransformer</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Transformer transformer = TransformerFactory.newInstance()</span><br><span class="line">.newTransformer();</span><br><span class="line">Properties properties = transformer.getOutputProperties();</span><br><span class="line">properties.setProperty(OutputKeys.ENCODING, <span class="string">"gb2312"</span>);</span><br><span class="line">properties.setProperty(OutputKeys.METHOD, <span class="string">"xml"</span>);</span><br><span class="line">properties.setProperty(OutputKeys.VERSION, <span class="string">"1.0"</span>);</span><br><span class="line">properties.setProperty(OutputKeys.INDENT, <span class="string">"no"</span>);</span><br><span class="line">transformer.setOutputProperties(properties);</span><br><span class="line"><span class="keyword">return</span> transformer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (TransformerConfigurationException tce) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(tce.getMessage());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回一段XML表述的错误信息。提示信息的TITLE为：系统错误。之所以使用字符串拼装，主要是这样做一般 不会有异常出现。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> errMsg</span></span><br><span class="line"><span class="comment"> *            提示错误信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a XML String show err msg</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * public static String errXMLString(String errMsg) &#123; StringBuffer msg = new</span></span><br><span class="line"><span class="comment"> * StringBuffer(100);</span></span><br><span class="line"><span class="comment"> * msg.append("&lt;?xml version="1.0" encoding="gb2312" ?&gt;");</span></span><br><span class="line"><span class="comment"> * msg.append("&lt;errNode title="系统错误" errMsg="" + errMsg + ""/&gt;"); return</span></span><br><span class="line"><span class="comment"> * msg.toString(); &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回一段XML表述的错误信息。提示信息的TITLE为：系统错误</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> errMsg</span></span><br><span class="line"><span class="comment"> *            提示错误信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> errClass</span></span><br><span class="line"><span class="comment"> *            抛出该错误的类，用于提取错误来源信息。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a XML String show err msg</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * public static String errXMLString(String errMsg, Class errClass) &#123;</span></span><br><span class="line"><span class="comment"> * StringBuffer msg = new StringBuffer(100);</span></span><br><span class="line"><span class="comment"> * msg.append("&lt;?xml version='1.0' encoding='gb2312' ?&gt;");</span></span><br><span class="line"><span class="comment"> * msg.append("&lt;errNode title="</span></span><br><span class="line"><span class="comment"> * 系统错误" errMsg=""+ errMsg + "" errSource=""+ errClass.getName()+ ""/&gt;");</span></span><br><span class="line"><span class="comment"> * 　return msg.toString(); &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回一段XML表述的错误信息。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> title</span></span><br><span class="line"><span class="comment"> *            提示的title</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> errMsg</span></span><br><span class="line"><span class="comment"> *            提示错误信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> errClass</span></span><br><span class="line"><span class="comment"> *            抛出该错误的类，用于提取错误来源信息。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a XML String show err msg</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">errXMLString</span><span class="params">(String title, String errMsg,</span></span></span><br><span class="line"><span class="function"><span class="params">Class errClass)</span> </span>&#123;</span><br><span class="line">StringBuffer msg = <span class="keyword">new</span> StringBuffer(<span class="number">100</span>);</span><br><span class="line">msg.append(<span class="string">"&lt;?xml version='1.0' encoding='utf-8' ?&gt;"</span>);</span><br><span class="line">msg.append(<span class="string">"&lt;errNode title="</span> + title + <span class="string">"errMsg="</span> + errMsg</span><br><span class="line">+ <span class="string">"errSource="</span> + errClass.getName() + <span class="string">"/&gt;"</span>);</span><br><span class="line"><span class="keyword">return</span> msg.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.pexetech.core.util.EmptyUtils;</span><br><span class="line"><span class="keyword">import</span> com.pexetech.core.util.PropertiesFileUtil;</span><br><span class="line"><span class="keyword">import</span> com.pexetech.rest.common.model.WSResult;</span><br><span class="line"><span class="keyword">import</span> org.apache.axis.client.Call;</span><br><span class="line"><span class="keyword">import</span> org.apache.axis.client.Service;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Document;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Element;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.NodeList;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.InputSource;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.SAXException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.namespace.QName;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilder;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilderFactory;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.ParserConfigurationException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.StringReader;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlOperationUtil</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">final</span> Log _log = LogFactory.getLog(getClass());</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String PATTERN = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SimpleDateFormat FORMAT = <span class="keyword">new</span> SimpleDateFormat(PATTERN);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">getTByname</span><span class="params">(Class&lt;T&gt; cls, NodeList nodeList)</span> </span>&#123;</span><br><span class="line">        List&lt;T&gt; tList = <span class="keyword">new</span> ArrayList&lt;T&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nodeList.getLength(); i++) &#123;</span><br><span class="line">            Element ele = (Element) nodeList.item(i);</span><br><span class="line">            T t = XmlUtil.toBean(DOMUtils.toStringFromDoc(ele), cls);</span><br><span class="line">            tList.add(t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> tList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Element <span class="title">getElerootByTagName</span><span class="params">(String xml, String tagName)</span> </span>&#123;</span><br><span class="line">        NodeList bomNodeList = getElerootsByTagName(xml, tagName);</span><br><span class="line">        Element bomRoot = (Element) bomNodeList.item(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> bomRoot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> NodeList <span class="title">getElerootsByTagName</span><span class="params">(String xml, String tagName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (EmptyUtils.isBlank(xml)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Document document = createDocument(xml);</span><br><span class="line">        <span class="keyword">return</span> document.getElementsByTagName(tagName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WSResult <span class="title">createErrWSResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        WSResult r = <span class="keyword">new</span> WSResult();</span><br><span class="line">        r.setCode(<span class="string">"-100"</span>);</span><br><span class="line">        r.setMsg(<span class="string">"系统出现异常！"</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">createDocument</span><span class="params">(String xml)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            DocumentBuilderFactory factory = DocumentBuilderFactory</span><br><span class="line">                    .newInstance();</span><br><span class="line">            DocumentBuilder builder;</span><br><span class="line">            builder = factory.newDocumentBuilder();</span><br><span class="line">            <span class="keyword">if</span> (EmptyUtils.isBlank(xml)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            StringReader sr = <span class="keyword">new</span> StringReader(xml);</span><br><span class="line">            InputSource is = <span class="keyword">new</span> InputSource(sr);</span><br><span class="line">            <span class="keyword">return</span> builder.parse(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SAXException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParserConfigurationException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">callWebService</span><span class="params">(String xml, String method)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 指出service所在完整的URL</span></span><br><span class="line">            String endpoint = PropertiesFileUtil.getInstance(<span class="string">"api"</span>).get(<span class="string">"webservicePath"</span>);</span><br><span class="line">            <span class="comment">//调用接口的targetNamespace</span></span><br><span class="line">            String targetNamespace = <span class="string">"http://webservice.web.rest.pexetech.com/"</span>;</span><br><span class="line">            <span class="comment">//所调用接口的方法method</span></span><br><span class="line">            method = method == <span class="keyword">null</span> ? PropertiesFileUtil.getInstance(<span class="string">"api"</span>).get(<span class="string">"methodName"</span>) : method;</span><br><span class="line">            <span class="comment">//以上需要配置</span></span><br><span class="line">            _log.info(<span class="string">"发送信息："</span> + xml);</span><br><span class="line">            <span class="comment">// 创建一个服务(service)调用(call)</span></span><br><span class="line">            Service service = <span class="keyword">new</span> Service();</span><br><span class="line"><span class="comment">//            javax.xml.rpc.Call call= service.createCall();</span></span><br><span class="line">            Call call = (Call) service.createCall();<span class="comment">// 通过service创建call对象</span></span><br><span class="line">            <span class="comment">// 设置service所在URL</span></span><br><span class="line">            call.setTargetEndpointAddress(<span class="keyword">new</span> java.net.URL(endpoint));</span><br><span class="line">            call.setOperationName(<span class="keyword">new</span> QName(targetNamespace, method));</span><br><span class="line">            call.setUseSOAPAction(<span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">//变量最好只是用String类型，其他类型会报错</span></span><br><span class="line">            call.addParameter(<span class="keyword">new</span> QName(targetNamespace, <span class="string">"xml"</span>), org.apache.axis.encoding.XMLType.XSD_STRING, javax.xml.rpc.ParameterMode.IN);<span class="comment">//设置参数名 state  第二个参数表示String类型,第三个参数表示入参</span></span><br><span class="line">            call.setReturnType(org.apache.axis.encoding.XMLType.XSD_STRING);<span class="comment">// 设置返回类型</span></span><br><span class="line">            <span class="comment">// String path = targetNamespace + method;</span></span><br><span class="line">            <span class="comment">// call.setSOAPActionURI(path);</span></span><br><span class="line">            String jsonString = (String) call.invoke(<span class="keyword">new</span> Object[]&#123;xml&#125;);<span class="comment">//此处为数组，有几个变量传几个变量</span></span><br><span class="line"><span class="comment">////将json字符串转换为JSON对象</span></span><br><span class="line"><span class="comment">//JSON json = (JSON) JSON.parse(jsonString);</span></span><br><span class="line"><span class="comment">////将接送对象转为java对象,此处用object代替，用的时候转换为你需要是用的对象就行了</span></span><br><span class="line"><span class="comment">//Object object = JSON.toJavaObject(json, Object.class);//注意别到错包com.alibaba.fastjson.JSON</span></span><br><span class="line">            _log.info(<span class="string">"返回结果："</span> + jsonString);</span><br><span class="line">            <span class="keyword">return</span> jsonString;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            _log.error(<span class="string">"callWebService error "</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.XStream;</span><br><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.io.xml.DomDriver;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Document;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Element;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.NodeList;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.InputSource;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.SAXException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilder;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.DocumentBuilderFactory;</span><br><span class="line"><span class="keyword">import</span> javax.xml.parsers.ParserConfigurationException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.StringReader;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 输出xml和解析xml的工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>:XmlUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: chenyoulong Email: chen.youlong@payeco.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> :2012-9-29 上午9:51:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * java 转换成xml</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj 对象实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String xml字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Title</span>: toXml</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: TODO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toXml</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        XStream xstream = <span class="keyword">new</span> XStream();</span><br><span class="line">        XStream.setupDefaultSecurity(xstream);</span><br><span class="line">        xstream.allowTypes(<span class="keyword">new</span> Class[]&#123;XmlUtil.class&#125;);</span><br><span class="line">        <span class="comment">// XStream xstream=new XStream(new DomDriver()); //直接用jaxp dom来解释</span></span><br><span class="line">        <span class="comment">// XStream xstream=new XStream(new DomDriver("utf-8"));</span></span><br><span class="line">        <span class="comment">// //指定编码解析器,直接用jaxp dom来解释</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// //如果没有这句，xml中的根元素会是&lt;包.类名&gt;；或者说：注解根本就没生效，所以的元素名就是类的属性</span></span><br><span class="line">        xstream.processAnnotations(obj.getClass()); <span class="comment">// 通过注解方式的，一定要有这句话</span></span><br><span class="line">        <span class="keyword">return</span> xstream.toXML(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将传入xml文本转换成Java对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> xmlStr</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cls    xml对应的class类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> T xml对应的class类的实例对象</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * 调用的方法实例：PersonBean person=XmlUtil.toBean(xmlStr,</span></span><br><span class="line"><span class="comment">     * PersonBean.class);</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Title</span>: toBean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: TODO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">toBean</span><span class="params">(String xmlStr, Class&lt;T&gt; cls)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 注意：不是new Xstream(); 否则报错：java.lang.NoClassDefFoundError:</span></span><br><span class="line">        <span class="comment">// org/xmlpull/v1/XmlPullParserFactory</span></span><br><span class="line">        XStream xstream = <span class="keyword">new</span> XStream(<span class="keyword">new</span> DomDriver());</span><br><span class="line">        xstream.processAnnotations(cls);</span><br><span class="line">        T obj = (T) xstream.fromXML(xmlStr);</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> NodeList <span class="title">getRootEleList</span><span class="params">(String bomXml, String rootName)</span> </span>&#123;</span><br><span class="line">        Document document = createDocument(bomXml);</span><br><span class="line">        NodeList bomNodeList = document.getElementsByTagName(rootName);</span><br><span class="line">        <span class="keyword">return</span> bomNodeList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Element <span class="title">getRootEle</span><span class="params">(String bomXml, String rootName)</span> </span>&#123;</span><br><span class="line">        Document document = createDocument(bomXml);</span><br><span class="line">        NodeList bomNodeList = document.getElementsByTagName(rootName);</span><br><span class="line">        <span class="keyword">if</span> (bomNodeList == <span class="keyword">null</span> || bomNodeList.getLength() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Element bomRoot = (Element) bomNodeList.item(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> bomRoot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getRootEleValue</span><span class="params">(String bomXml, String rootName)</span> </span>&#123;</span><br><span class="line">        Document document = createDocument(bomXml);</span><br><span class="line">        NodeList bomNodeList = document.getElementsByTagName(rootName);</span><br><span class="line">        <span class="keyword">if</span> (bomNodeList == <span class="keyword">null</span> || bomNodeList.getLength() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Element bomRoot = (Element) bomNodeList.item(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> bomRoot.getTextContent();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回根目录下元素的值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getRootDocumentValue</span><span class="params">(String bomXml, String rootName)</span> </span>&#123;</span><br><span class="line">        Document document = createDocument(bomXml);</span><br><span class="line">        NodeList bomNodeList = document.getChildNodes();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bomNodeList.getLength(); i++) &#123;</span><br><span class="line">            Element bomRoot = (Element) bomNodeList.item(i);</span><br><span class="line">            NodeList childrenNodeList = bomRoot.getChildNodes();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; childrenNodeList.getLength(); j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (childrenNodeList.item(j).hasChildNodes()) &#123;</span><br><span class="line">                    Element childrenRoot = (Element) childrenNodeList.item(j);</span><br><span class="line">                    <span class="keyword">if</span> (rootName.equals(childrenRoot.getTagName())) &#123;</span><br><span class="line">                        <span class="keyword">return</span> childrenRoot.getTextContent();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getRootEleValue</span><span class="params">(Element ele, String rootName)</span> </span>&#123;</span><br><span class="line">        NodeList bomNodeList = ele.getElementsByTagName(rootName);</span><br><span class="line">        <span class="keyword">if</span> (bomNodeList == <span class="keyword">null</span> || bomNodeList.getLength() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Element bomRoot = (Element) bomNodeList.item(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> bomRoot.getTextContent();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Document <span class="title">createDocument</span><span class="params">(String xml)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            DocumentBuilderFactory factory = DocumentBuilderFactory</span><br><span class="line">                    .newInstance();</span><br><span class="line">            DocumentBuilder builder;</span><br><span class="line">            builder = factory.newDocumentBuilder();</span><br><span class="line"></span><br><span class="line">            StringReader sr = <span class="keyword">new</span> StringReader(xml);</span><br><span class="line">            InputSource is = <span class="keyword">new</span> InputSource(sr);</span><br><span class="line">            <span class="keyword">return</span> builder.parse(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SAXException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParserConfigurationException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    public static XmlResult sendWebService(String command, String xml) &#123;</span></span><br><span class="line"><span class="comment">//        try &#123;</span></span><br><span class="line"><span class="comment">//            // Client c = new Client(new</span></span><br><span class="line"><span class="comment">//            // URL("http://wuxin20642.xicp.net:19845/services/myService?wsdl"));</span></span><br><span class="line"><span class="comment">//            Client c = new Client(new URL("http://127.0.0.1:7890/HelloWorld?wsdl"));</span></span><br><span class="line"><span class="comment">//            Object[] result = c.invoke(command, new String[]&#123;xml&#125;);</span></span><br><span class="line"><span class="comment">//            return new XmlResult(true, "call success.", (String) result[0]);</span></span><br><span class="line"><span class="comment">//        &#125; catch (ConnectException ce) &#123;</span></span><br><span class="line"><span class="comment">//            return new XmlResult(false, "call ConnectException.", null, "404");</span></span><br><span class="line"><span class="comment">//        &#125; catch (Exception e) &#123;</span></span><br><span class="line"><span class="comment">//            System.err.println(e.toString());</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        return new XmlResult(false, "call error.", null, "500");</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.pexetech.core.util.EmptyUtils;</span><br><span class="line"><span class="keyword">import</span> com.pexetech.rest.common.model.RealtechMiot;</span><br><span class="line"><span class="keyword">import</span> com.pexetech.rest.common.model.WSRequest;</span><br><span class="line"><span class="keyword">import</span> com.pexetech.rest.common.model.WSResult;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Element;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.NodeList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlUtilForMiot</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">XmlOperationUtil</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ROOT = <span class="string">"realtech"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BODY = <span class="string">"body"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String HEAD = <span class="string">"head"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DATA = <span class="string">"data"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> RealtechMiot&lt;T&gt; <span class="title">toRequestBean</span><span class="params">(String xmlStr, Class&lt;T&gt; cls)</span> </span>&#123;</span><br><span class="line">Element rootEle = getRootEle(xmlStr);</span><br><span class="line"></span><br><span class="line">Element head = getElerootByTagName(DOMUtils.toStringFromDoc(rootEle),</span><br><span class="line">HEAD);</span><br><span class="line">WSRequest wsRequest = XmlUtil.toBean(DOMUtils.toStringFromDoc(head),</span><br><span class="line">WSRequest.class);</span><br><span class="line">List&lt;T&gt; tList = createTlist(cls, rootEle);</span><br><span class="line">RealtechMiot&lt;T&gt; tm = <span class="keyword">new</span> RealtechMiot&lt;T&gt;(wsRequest, tList);</span><br><span class="line"><span class="keyword">return</span> tm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> List&lt;T&gt; <span class="title">createTlist</span><span class="params">(Class&lt;T&gt; cls, Element rootEle)</span> </span>&#123;</span><br><span class="line">Element bodyEle = getBodyEle(DOMUtils.toStringFromDoc(rootEle));</span><br><span class="line">List&lt;T&gt; tList = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (cls != <span class="keyword">null</span>) &#123;</span><br><span class="line">NodeList nodeList = getElerootsByTagName(</span><br><span class="line">DOMUtils.toStringFromDoc(bodyEle), DATA);</span><br><span class="line"><span class="keyword">if</span> (nodeList != <span class="keyword">null</span> &amp;&amp; nodeList.getLength() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">tList = getTByname(cls, nodeList);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> tList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> RealtechMiot&lt;T&gt; <span class="title">toResultBean</span><span class="params">(String xmlStr, Class&lt;T&gt; cls)</span> </span>&#123;</span><br><span class="line">Element rootEle = getRootEle(xmlStr);</span><br><span class="line">Element head = getElerootByTagName(DOMUtils.toStringFromDoc(rootEle),</span><br><span class="line">HEAD);</span><br><span class="line">WSResult wsResult = XmlUtil.toBean(DOMUtils.toStringFromDoc(head),</span><br><span class="line">WSResult.class);</span><br><span class="line">List&lt;T&gt; tList = createTlist(cls, rootEle);</span><br><span class="line">RealtechMiot&lt;T&gt; tm = <span class="keyword">new</span> RealtechMiot&lt;T&gt;(wsResult, tList);</span><br><span class="line"><span class="keyword">return</span> tm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toRequestXml</span><span class="params">(WSRequest wsRequest, List&lt;T&gt; datas)</span> </span>&#123;</span><br><span class="line">String head = XmlUtil.toXml(wsRequest);</span><br><span class="line">String dataStr = listToXmlStr(datas);</span><br><span class="line"></span><br><span class="line">String result = connectXmlStr(head, dataStr);</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toRequestXml</span><span class="params">(WSRequest wsRequest, Object datas)</span> </span>&#123;</span><br><span class="line">String head = XmlUtil.toXml(wsRequest);</span><br><span class="line">String dataStr = listToXmlStr(datas);</span><br><span class="line"></span><br><span class="line">String result = connectXmlStr(head, dataStr);</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toResultXml</span><span class="params">(WSResult wsResult, List&lt;T&gt; datas)</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">String head = XmlUtil.toXml(wsResult);</span><br><span class="line">String dataStr = listToXmlStr(datas);</span><br><span class="line"></span><br><span class="line">String result = connectXmlStr(head, dataStr);</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">String head = XmlUtil.toXml(createErrWSResult());</span><br><span class="line"><span class="keyword">return</span> connectXmlStr(head, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">connectXmlStr</span><span class="params">(String head, String dataStr)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (dataStr == <span class="keyword">null</span> || EmptyUtils.isBlank(dataStr)) &#123;</span><br><span class="line">dataStr = <span class="string">"&lt;data&gt;&lt;/data&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line">String result = <span class="string">"&lt;"</span> + ROOT + <span class="string">"&gt;"</span> + head + <span class="string">"&lt;"</span> + BODY + <span class="string">"&gt;"</span> + dataStr</span><br><span class="line">+ <span class="string">"&lt;/"</span> + BODY + <span class="string">"&gt;"</span> + <span class="string">"&lt;/"</span> + ROOT + <span class="string">"&gt;"</span>;</span><br><span class="line"><span class="comment">// 处理xStreambug，一个"_"会变成2个</span></span><br><span class="line"><span class="keyword">if</span> (result.contains(<span class="string">"__"</span>)) &#123;</span><br><span class="line">result = result.replace(<span class="string">"__"</span>, <span class="string">"_"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">listToXmlStr</span><span class="params">(List&lt;T&gt; datas)</span> </span>&#123;</span><br><span class="line">String dataStr = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">if</span> (datas != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> (T t : datas) &#123;</span><br><span class="line">dataStr += XmlUtil.toXml(t);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dataStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">listToXmlStr</span><span class="params">(Object datas)</span> </span>&#123;</span><br><span class="line">String dataStr = XmlUtil.toXml(datas);</span><br><span class="line"><span class="keyword">return</span> dataStr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Element <span class="title">getRootEle</span><span class="params">(String xml)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> getElerootByTagName(xml, ROOT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Element <span class="title">getBodyEle</span><span class="params">(String xml)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> getElerootByTagName(xml, BODY);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="spring注入"><a href="#spring注入" class="headerlink" title="spring注入"></a>spring注入</h1><p>applicationContext-webservice.xml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:jaxws=&quot;http://cxf.apache.org/jaxws&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://cxf.apache.org/jaxws</span><br><span class="line">        http://cxf.apache.org/schemas/jaxws.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;jaxws:endpoint id=&quot;pexeService&quot; implementor=&quot;com.pexetech.rest.web.webservice.PexeServiceImpl&quot;</span><br><span class="line">                    address=&quot;http://127.0.0.1:6789/webService&quot;/&gt;</span><br><span class="line">    &lt;!--物料入库--&gt;</span><br><span class="line">        &lt;bean id=&quot;create_material_input&quot; class=&quot;com.pexetech.rest.web.webservice.service.InventoryInputRestService&quot;&gt;</span><br><span class="line">            &lt;property name=&quot;function&quot; value=&quot;createMaterialInput&quot;/&gt;</span><br><span class="line">        &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><h1 id="工厂"><a href="#工厂" class="headerlink" title="工厂"></a>工厂</h1><p><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20190810160713.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WSFunctionFactory</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">(String message)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.pexetech.core.util.EmptyUtils;</span><br><span class="line"><span class="keyword">import</span> com.pexetech.rest.web.webservice.WSFunctionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">WebService</span> <span class="keyword">implements</span> <span class="title">WSFunctionFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">final</span> Log _log = LogFactory.getLog(getClass());</span><br><span class="line">    <span class="keyword">private</span> String _function;</span><br><span class="line">    <span class="keyword">private</span> String _companyId = <span class="string">"c3457cb41baa4b568e05799751de33e4"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCompanyId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _companyId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCompanyId</span><span class="params">(String companyId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._companyId = companyId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFunction</span><span class="params">(String function)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._function = function;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._function;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">executeMethod</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">execute</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        String s = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!EmptyUtils.isBlank(getFunction())) &#123;</span><br><span class="line">                s = (String) <span class="keyword">this</span>.getClass()</span><br><span class="line">                        .getMethod(getFunction(), String.class)</span><br><span class="line">                        .invoke(<span class="keyword">this</span>, message);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                s = executeMethod(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SecurityException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="提供者"><a href="#提供者" class="headerlink" title="提供者"></a>提供者</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateUnbomRequestRestService</span> <span class="keyword">extends</span> <span class="title">WebService</span> </span>&#123;</span><br><span class="line">     <span class="keyword">private</span> XmlUtilForMiot&lt;PurchaseUnbomRequestPXView&gt; iixml = <span class="keyword">new</span> XmlUtilForMiot&lt;PurchaseUnbomRequestPXView&gt;();</span><br><span class="line">      <span class="function"><span class="keyword">public</span> String <span class="title">createUnbomRequest</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">             WSResult r = <span class="keyword">null</span>;</span><br><span class="line">        r = <span class="keyword">new</span> WSResult(<span class="keyword">true</span>, <span class="string">"100"</span>, <span class="string">"抛送成功"</span>);</span><br><span class="line">                    <span class="keyword">return</span> iixml.toResultXml(r, resultList);    </span><br><span class="line">      &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;所需依赖&quot;&gt;&lt;a href=&quot;#所需依赖&quot; class=&quot;headerlink&quot; title=&quot;所需依赖&quot;&gt;&lt;/a&gt;所需依赖&lt;/h1&gt;
    
    </summary>
    
      <category term="JAVA" scheme="https://luckybearbear.github.io/categories/JAVA/"/>
    
    
      <category term="webService" scheme="https://luckybearbear.github.io/tags/webService/"/>
    
  </entry>
  
  <entry>
    <title>redis开机自启</title>
    <link href="https://luckybearbear.github.io/2019/08/08/redis%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF/"/>
    <id>https://luckybearbear.github.io/2019/08/08/redis开机自启/</id>
    <published>2019-08-08T07:27:25.000Z</published>
    <updated>2020-07-24T03:34:57.631Z</updated>
    
    <content type="html"><![CDATA[<h1 id="window"><a href="#window" class="headerlink" title="window"></a>window</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server --service-install redis.windows.conf --loglevel verbose</span><br></pre></td></tr></table></figure><p>1、安装service服务<br>    redis-server –service-install redis.windows.conf –service-name redis6379<br>2、启动service服务<br>   redis-server –service-start<br>3、停止命令<br>   redis-server –service-stop<br>4、卸载命令<br>  redis-server –service-uninstall –service-name redis6379</p><h1 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h1><h2 id="设置redis-conf中daemonize为yes-确保守护进程开启。"><a href="#设置redis-conf中daemonize为yes-确保守护进程开启。" class="headerlink" title="设置redis.conf中daemonize为yes,确保守护进程开启。"></a>设置redis.conf中daemonize为yes,确保守护进程开启。</h2><p> 查找redis配置文件redis.conf<br> <a id="more"></a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# find / -name redis.conf</span><br><span class="line">/usr/local/redis/redis.conf</span><br></pre></td></tr></table></figure><p> 编辑redis配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /usr/local/redis/redis.conf</span><br></pre></td></tr></table></figure><p>命令行模式下输入 /daemonize 查找,将配置文件中daemonize为yes</p><h2 id="编写开机自启动脚本"><a href="#编写开机自启动脚本" class="headerlink" title="编写开机自启动脚本"></a>编写开机自启动脚本</h2><p>vi /etc/init.d/redis</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># chkconfig: 2345 10 90  </span><br><span class="line"># description: Start and Stop redis   </span><br><span class="line">  </span><br><span class="line">PATH=/usr/local/bin:/sbin:/usr/bin:/bin   </span><br><span class="line">REDISPORT=6379  </span><br><span class="line">  EXEC=/usr/local/redis/redis-server</span><br><span class="line">  REDIS_CLI=/usr/local/redis/redis-cli</span><br><span class="line"></span><br><span class="line">　PIDFILE=/var/run/redis.pid</span><br><span class="line">  CONF=&quot;/usr/local/redis/redis.conf&quot;</span><br><span class="line"></span><br><span class="line">case &quot;$1&quot; in   </span><br><span class="line">        start)   </span><br><span class="line">                if [ -f $PIDFILE ]   </span><br><span class="line">                then   </span><br><span class="line">                        echo &quot;$PIDFILE exists, process is already running or crashed.&quot;  </span><br><span class="line">                else  </span><br><span class="line">                        echo &quot;Starting Redis server...&quot;  </span><br><span class="line">                        $EXEC $CONF   </span><br><span class="line">                fi   </span><br><span class="line">                if [ &quot;$?&quot;=&quot;0&quot; ]   </span><br><span class="line">                then   </span><br><span class="line">                        echo &quot;Redis is running...&quot;  </span><br><span class="line">                fi   </span><br><span class="line">                ;;   </span><br><span class="line">        stop)   </span><br><span class="line">                if [ ! -f $PIDFILE ]   </span><br><span class="line">                then   </span><br><span class="line">                        echo &quot;$PIDFILE exists, process is not running.&quot;  </span><br><span class="line">                else  </span><br><span class="line">                        PID=$(cat $PIDFILE)   </span><br><span class="line">                        echo &quot;Stopping...&quot;  </span><br><span class="line">                       $REDIS_CLI -p $REDISPORT  SHUTDOWN    </span><br><span class="line">                        sleep 2  </span><br><span class="line">                       while [ -x $PIDFILE ]   </span><br><span class="line">                       do  </span><br><span class="line">                                echo &quot;Waiting for Redis to shutdown...&quot;  </span><br><span class="line">                               sleep 1  </span><br><span class="line">                        done   </span><br><span class="line">                        echo &quot;Redis stopped&quot;  </span><br><span class="line">                fi   </span><br><span class="line">                ;;   </span><br><span class="line">        restart|force-reload)   </span><br><span class="line">                $&#123;0&#125; stop   </span><br><span class="line">                $&#123;0&#125; start   </span><br><span class="line">                ;;   </span><br><span class="line">        *)   </span><br><span class="line">               echo &quot;Usage: /etc/init.d/redis &#123;start|stop|restart|force-reload&#125;&quot; &gt;&amp;2  </span><br><span class="line">                exit 1  </span><br><span class="line">esac</span><br></pre></td></tr></table></figure><h2 id="设置权限"><a href="#设置权限" class="headerlink" title="设置权限"></a>设置权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost init.d]# chmod 777 /etc/init.d/redis</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;window&quot;&gt;&lt;a href=&quot;#window&quot; class=&quot;headerlink&quot; title=&quot;window&quot;&gt;&lt;/a&gt;window&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;redis-server --service-install redis.windows.conf --loglevel verbose&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;1、安装service服务&lt;br&gt;    redis-server –service-install redis.windows.conf –service-name redis6379&lt;br&gt;2、启动service服务&lt;br&gt;   redis-server –service-start&lt;br&gt;3、停止命令&lt;br&gt;   redis-server –service-stop&lt;br&gt;4、卸载命令&lt;br&gt;  redis-server –service-uninstall –service-name redis6379&lt;/p&gt;
&lt;h1 id=&quot;linux&quot;&gt;&lt;a href=&quot;#linux&quot; class=&quot;headerlink&quot; title=&quot;linux&quot;&gt;&lt;/a&gt;linux&lt;/h1&gt;&lt;h2 id=&quot;设置redis-conf中daemonize为yes-确保守护进程开启。&quot;&gt;&lt;a href=&quot;#设置redis-conf中daemonize为yes-确保守护进程开启。&quot; class=&quot;headerlink&quot; title=&quot;设置redis.conf中daemonize为yes,确保守护进程开启。&quot;&gt;&lt;/a&gt;设置redis.conf中daemonize为yes,确保守护进程开启。&lt;/h2&gt;&lt;p&gt; 查找redis配置文件redis.conf&lt;br&gt;
    
    </summary>
    
      <category term="工具" scheme="https://luckybearbear.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="redis" scheme="https://luckybearbear.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>nginx配置ssl证书</title>
    <link href="https://luckybearbear.github.io/2019/08/08/nginx%E9%85%8D%E7%BD%AEssl%E8%AF%81%E4%B9%A6/"/>
    <id>https://luckybearbear.github.io/2019/08/08/nginx配置ssl证书/</id>
    <published>2019-08-08T07:06:07.000Z</published>
    <updated>2020-07-24T03:34:57.630Z</updated>
    
    <content type="html"><![CDATA[<p>配置如下</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 443;</span><br><span class="line">        server_name sm.moldcio.com;  # localhost修改为您证书绑定的域名。</span><br><span class="line">        #error_page 497  https://$host$request_uri; #正常错误反馈转换到https</span><br><span class="line">        ssl on;   #设置为on启用SSL功能。</span><br><span class="line">        #root html;</span><br><span class="line">        #index index.html index.htm;</span><br><span class="line">        ssl_certificate /tomcat/ssl_key/2225091_sm.moldcio.com.pem;   #将domain name.pem替换成您证书的文件名。</span><br><span class="line">        ssl_certificate_key /tomcat/ssl_key/2225091_sm.moldcio.com.key;   #将domain name.key替换成您证书的密钥文件名。</span><br><span class="line">        ssl_session_timeout 5m;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #使用此加密套件。</span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;   #使用该协议进行配置。</span><br><span class="line">        ssl_prefer_server_ciphers on;   </span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_set_header Host  $host;</span><br><span class="line">            proxy_set_header X-Real-Ip $remote_addr;</span><br><span class="line">            proxy_set_header X-Forwarded-For $remote_addr;</span><br><span class="line">            proxy_pass http://119.3.9.188;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  sm.moldcio.com;</span><br><span class="line">    </span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Real-Ip $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $remote_addr;</span><br><span class="line">        proxy_pass http://119.3.9.188:8101;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;配置如下&lt;/p&gt;
    
    </summary>
    
      <category term="工具" scheme="https://luckybearbear.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="nginx" scheme="https://luckybearbear.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>docker常用命令</title>
    <link href="https://luckybearbear.github.io/2019/08/08/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://luckybearbear.github.io/2019/08/08/docker常用命令/</id>
    <published>2019-08-08T06:40:11.000Z</published>
    <updated>2020-07-24T03:34:57.629Z</updated>
    
    <content type="html"><![CDATA[<h1 id="docker-logs-查看实时日志"><a href="#docker-logs-查看实时日志" class="headerlink" title="docker logs 查看实时日志"></a>docker logs 查看实时日志</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f -t --since=&quot;2019-01-12&quot; --tail=200 upms-web</span><br></pre></td></tr></table></figure><p>–since : 此参数指定了输出日志开始日期，即只输出指定日期之后的日志。</p><p>-f : 查看实时日志</p><p>-t : 查看日志产生的日期</p><p>-tail=10 : 查看最后的10条日志。</p><p>upms-web : 容器名称</p><a id="more"></a><h1 id="进入tomcat容器-查看jdk版本"><a href="#进入tomcat容器-查看jdk版本" class="headerlink" title="进入tomcat容器 查看jdk版本"></a>进入tomcat容器 查看jdk版本</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker  exec -it upms-web /bin/bash</span><br><span class="line"></span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><h1 id="重启指定容器"><a href="#重启指定容器" class="headerlink" title="重启指定容器"></a>重启指定容器</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart [容器名称]</span><br></pre></td></tr></table></figure><h1 id="查看挂载"><a href="#查看挂载" class="headerlink" title="查看挂载"></a>查看挂载</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect nginx</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/Image.png" alt></p><h1 id="docker-生成镜像"><a href="#docker-生成镜像" class="headerlink" title="docker 生成镜像"></a>docker 生成镜像</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure><h1 id="复制日志"><a href="#复制日志" class="headerlink" title="复制日志"></a>复制日志</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp mes-web:/usr/local/logs/mes-web.log ~</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;docker-logs-查看实时日志&quot;&gt;&lt;a href=&quot;#docker-logs-查看实时日志&quot; class=&quot;headerlink&quot; title=&quot;docker logs 查看实时日志&quot;&gt;&lt;/a&gt;docker logs 查看实时日志&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker logs -f -t --since=&amp;quot;2019-01-12&amp;quot; --tail=200 upms-web&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;–since : 此参数指定了输出日志开始日期，即只输出指定日期之后的日志。&lt;/p&gt;
&lt;p&gt;-f : 查看实时日志&lt;/p&gt;
&lt;p&gt;-t : 查看日志产生的日期&lt;/p&gt;
&lt;p&gt;-tail=10 : 查看最后的10条日志。&lt;/p&gt;
&lt;p&gt;upms-web : 容器名称&lt;/p&gt;
    
    </summary>
    
      <category term="工具" scheme="https://luckybearbear.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="docker" scheme="https://luckybearbear.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>github常用命令</title>
    <link href="https://luckybearbear.github.io/2019/08/08/github%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://luckybearbear.github.io/2019/08/08/github常用命令/</id>
    <published>2019-08-08T06:18:42.000Z</published>
    <updated>2020-07-24T03:34:57.629Z</updated>
    
    <content type="html"><![CDATA[<h2 id="查看这个月star最多的项目"><a href="#查看这个月star最多的项目" class="headerlink" title="查看这个月star最多的项目"></a>查看这个月star最多的项目</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/trending/java?since=monthly</span><br><span class="line">[java]可以替换成其他语言</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><p>git init 新建一个空的仓库<br>git status 查看状态<br>git add . 添加文件<br>git commit -m ‘注释’ 提交添加的文件并备注说明<br>git remote add origin <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:jinzhaogit/git.git 连接远程仓库<br>git push -u origin master 将本地仓库文件推送到远程仓库<br>git log 查看变更日志<br>git reset –hard 版本号前六位 回归到指定版本<br>git branch 查看分支<br>git branch newname 创建一个叫newname的分支<br>git checkout newname 切换到叫newname的分支上<br>git merge newname 把newname分支合并到当前分支上<br>git pull origin master 将master分支上的内容拉到本地上</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;查看这个月star最多的项目&quot;&gt;&lt;a href=&quot;#查看这个月star最多的项目&quot; class=&quot;headerlink&quot; title=&quot;查看这个月star最多的项目&quot;&gt;&lt;/a&gt;查看这个月star最多的项目&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;https://github.com/trending/java?since=monthly&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[java]可以替换成其他语言&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="工具" scheme="https://luckybearbear.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="github" scheme="https://luckybearbear.github.io/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>Markdowm编辑以及图片上传</title>
    <link href="https://luckybearbear.github.io/2019/08/08/Markdowm%E7%BC%96%E8%BE%91%E4%BB%A5%E5%8F%8A%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/"/>
    <id>https://luckybearbear.github.io/2019/08/08/Markdowm编辑以及图片上传/</id>
    <published>2019-08-08T05:51:39.000Z</published>
    <updated>2020-07-24T03:34:57.627Z</updated>
    
    <content type="html"><![CDATA[<h2 id="图片上传工具-PicGO"><a href="#图片上传工具-PicGO" class="headerlink" title="图片上传工具 PicGO"></a>图片上传工具 PicGO</h2><a id="more"></a><p>下载地址: <a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noopener">https://github.com/Molunerfinn/PicGo/releases</a></p><p>配置PicGo<br><img src="https://raw.githubusercontent.com/luckybearbear/img/master/hexo/20190808140445.png" alt></p><h2 id="markdown工具-Typora"><a href="#markdown工具-Typora" class="headerlink" title="markdown工具 Typora"></a>markdown工具 Typora</h2>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;图片上传工具-PicGO&quot;&gt;&lt;a href=&quot;#图片上传工具-PicGO&quot; class=&quot;headerlink&quot; title=&quot;图片上传工具 PicGO&quot;&gt;&lt;/a&gt;图片上传工具 PicGO&lt;/h2&gt;
    
    </summary>
    
      <category term="工具" scheme="https://luckybearbear.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Markdowm" scheme="https://luckybearbear.github.io/tags/Markdowm/"/>
    
  </entry>
  
</feed>
